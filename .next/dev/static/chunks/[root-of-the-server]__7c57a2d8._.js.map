{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_5972bc34.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"inter_5972bc34-module__OU16Qa__className\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_5972bc34.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Inter%22,%22arguments%22:[{%22subsets%22:[%22latin%22]}],%22variableName%22:%22inter%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Inter', 'Inter Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,mKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,mKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,mKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/auth.tsx"],"sourcesContent":["\"use client\";\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\n\r\ninterface AuthContextType {\r\n    user: UserProfile | null;\r\n    profile: UserProfile | null;\r\n    isAuthenticated: boolean;\r\n    isLoading: boolean;\r\n    login: (email: string) => Promise<void>;\r\n    logout: () => void;\r\n}\r\n\r\ninterface UserProfile {\r\n    id: string;\r\n    email: string;\r\n    username: string;\r\n    display_name?: string;\r\n    avatar_url?: string;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const COLLABORATORS = [\r\n    { email: 'luissantunes031@gmail.com', username: 'Luis' },\r\n    { email: 'guiferreirahosken13@gmail.com', username: 'Gui' },\r\n    { email: 'jotawxw@gmail.com', username: 'JP' }\r\n];\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n    const [user, setUser] = useState<UserProfile | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    // Check if user is logged in (localStorage)\r\n    useEffect(() => {\r\n        if (typeof window === 'undefined') {\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n        const storedUser = localStorage.getItem('ops_current_user');\r\n        if (storedUser) {\r\n            try {\r\n                const parsedUser = JSON.parse(storedUser);\r\n                setUser(parsedUser);\r\n            } catch (e) {\r\n                localStorage.removeItem('ops_current_user');\r\n            }\r\n        }\r\n        setIsLoading(false);\r\n    }, []);\r\n\r\n    // Simple localStorage-only login\r\n    const login = async (email: string) => {\r\n        console.log('üîê Login com email:', email);\r\n\r\n        try {\r\n            const collaborator = COLLABORATORS.find(c => c.email === email);\r\n\r\n            if (!collaborator) {\r\n                throw new Error('Email n√£o encontrado');\r\n            }\r\n\r\n            const userProfile: UserProfile = {\r\n                id: `user-${Date.now()}`,\r\n                email: email,\r\n                username: collaborator.username,\r\n                display_name: collaborator.username\r\n            };\r\n\r\n            console.log('‚úÖ Login bem-sucedido:', userProfile);\r\n\r\n            // Salvar no localStorage\r\n            if (typeof window !== 'undefined') {\r\n                localStorage.setItem('ops_current_user', JSON.stringify(userProfile));\r\n            }\r\n            setUser(userProfile);\r\n\r\n        } catch (error) {\r\n            console.error('‚ùå Erro ao fazer login:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // Logout\r\n    const logout = () => {\r\n        if (typeof window !== 'undefined') {\r\n            localStorage.removeItem('ops_current_user');\r\n        }\r\n        setUser(null);\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                user,\r\n                profile: user,\r\n                isAuthenticated: !!user,\r\n                isLoading,\r\n                login,\r\n                logout,\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AACA;;;AADA;;AAoBA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,MAAM,gBAAgB;IACzB;QAAE,OAAO;QAA6B,UAAU;IAAO;IACvD;QAAE,OAAO;QAAiC,UAAU;IAAM;IAC1D;QAAE,OAAO;QAAqB,UAAU;IAAK;CAChD;AAEM,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAqB;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,4CAA4C;IAC5C,IAAA,0KAAS;kCAAC;YACN;;YAKA,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,IAAI,YAAY;gBACZ,IAAI;oBACA,MAAM,aAAa,KAAK,KAAK,CAAC;oBAC9B,QAAQ;gBACZ,EAAE,OAAO,GAAG;oBACR,aAAa,UAAU,CAAC;gBAC5B;YACJ;YACA,aAAa;QACjB;iCAAG,EAAE;IAEL,iCAAiC;IACjC,MAAM,QAAQ,OAAO;QACjB,QAAQ,GAAG,CAAC,uBAAuB;QAEnC,IAAI;YACA,MAAM,eAAe,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;YAEzD,IAAI,CAAC,cAAc;gBACf,MAAM,IAAI,MAAM;YACpB;YAEA,MAAM,cAA2B;gBAC7B,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;gBACxB,OAAO;gBACP,UAAU,aAAa,QAAQ;gBAC/B,cAAc,aAAa,QAAQ;YACvC;YAEA,QAAQ,GAAG,CAAC,yBAAyB;YAErC,yBAAyB;YACzB,wCAAmC;gBAC/B,aAAa,OAAO,CAAC,oBAAoB,KAAK,SAAS,CAAC;YAC5D;YACA,QAAQ;QAEZ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACV;IACJ;IAEA,SAAS;IACT,MAAM,SAAS;QACX,wCAAmC;YAC/B,aAAa,UAAU,CAAC;QAC5B;QACA,QAAQ;IACZ;IAEA,qBACI,6LAAC,YAAY,QAAQ;QACjB,OAAO;YACH;YACA,SAAS;YACT,iBAAiB,CAAC,CAAC;YACnB;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;GA7EgB;KAAA;AA+ET,SAAS;;IACZ,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Supabase configuration\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\r\n\r\n// Validate environment variables\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n    console.warn('‚ö†Ô∏è Supabase environment variables not configured. Database features will not work.');\r\n}\r\n\r\n// Create Supabase client\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n        persistSession: true,\r\n        autoRefreshToken: true,\r\n    },\r\n});\r\n\r\n// Export for use throughout the app\r\nexport default supabase;\r\n"],"names":[],"mappings":";;;;;;AAGoB;AAHpB;;AAEA,yBAAyB;AACzB,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE,iCAAiC;AACjC;;AAKO,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa,iBAAiB;IAC/D,MAAM;QACF,gBAAgB;QAChB,kBAAkB;IACtB;AACJ;uCAGe"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/validation.ts"],"sourcesContent":["// Validation helpers for OPS Operation\r\n\r\nexport interface ValidationError {\r\n    field: string;\r\n    message: string;\r\n}\r\n\r\nexport interface ValidationResult {\r\n    isValid: boolean;\r\n    errors: ValidationError[];\r\n}\r\n\r\n// ========== EMAIL VALIDATION ==========\r\nexport function isValidEmail(email: string): boolean {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n}\r\n\r\n// ========== PHONE VALIDATION ==========\r\nexport function isValidPhone(phone: string): boolean {\r\n    // Remove all non-digits\r\n    const cleaned = phone.replace(/\\D/g, '');\r\n    // Brazilian phone: 10-11 digits\r\n    return cleaned.length >= 10 && cleaned.length <= 11;\r\n}\r\n\r\n// ========== CLIENT VALIDATION ==========\r\nexport function validateClient(data: any): ValidationResult {\r\n    const errors: ValidationError[] = [];\r\n\r\n    // Nome obrigat√≥rio (min 3 chars)\r\n    if (!data.responsible_name || data.responsible_name.trim().length < 3) {\r\n        errors.push({\r\n            field: 'responsible_name',\r\n            message: 'Nome deve ter pelo menos 3 caracteres'\r\n        });\r\n    }\r\n\r\n    // Company name obrigat√≥rio\r\n    if (!data.company_name || data.company_name.trim().length < 2) {\r\n        errors.push({\r\n            field: 'company_name',\r\n            message: 'Nome da empresa √© obrigat√≥rio'\r\n        });\r\n    }\r\n\r\n    // WhatsApp obrigat√≥rio e v√°lido\r\n    if (!data.whatsapp) {\r\n        errors.push({\r\n            field: 'whatsapp',\r\n            message: 'WhatsApp √© obrigat√≥rio'\r\n        });\r\n    } else if (!isValidPhone(data.whatsapp)) {\r\n        errors.push({\r\n            field: 'whatsapp',\r\n            message: 'WhatsApp inv√°lido (use apenas n√∫meros)'\r\n        });\r\n    }\r\n\r\n    // Email opcional mas deve ser v√°lido\r\n    if (data.email && !isValidEmail(data.email)) {\r\n        errors.push({\r\n            field: 'email',\r\n            message: 'Email inv√°lido'\r\n        });\r\n    }\r\n\r\n    // Valores num√©ricos devem ser positivos\r\n    if (data.project_value && data.project_value < 0) {\r\n        errors.push({\r\n            field: 'project_value',\r\n            message: 'Valor do projeto deve ser positivo'\r\n        });\r\n    }\r\n\r\n    if (data.monthly_value && data.monthly_value < 0) {\r\n        errors.push({\r\n            field: 'monthly_value',\r\n            message: 'Valor mensal deve ser positivo'\r\n        });\r\n    }\r\n\r\n    return {\r\n        isValid: errors.length === 0,\r\n        errors\r\n    };\r\n}\r\n\r\n// ========== TASK VALIDATION ==========\r\nexport function validateTask(data: any): ValidationResult {\r\n    const errors: ValidationError[] = [];\r\n\r\n    // T√≠tulo obrigat√≥rio (min 3 chars)\r\n    if (!data.title || data.title.trim().length < 3) {\r\n        errors.push({\r\n            field: 'title',\r\n            message: 'T√≠tulo deve ter pelo menos 3 caracteres'\r\n        });\r\n    }\r\n\r\n    // Cliente obrigat√≥rio\r\n    if (!data.client_id) {\r\n        errors.push({\r\n            field: 'client_id',\r\n            message: 'Cliente √© obrigat√≥rio'\r\n        });\r\n    }\r\n\r\n    // Deadline deve ser data v√°lida e futura (opcional)\r\n    if (data.deadline) {\r\n        const deadline = new Date(data.deadline);\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0);\r\n\r\n        if (isNaN(deadline.getTime())) {\r\n            errors.push({\r\n                field: 'deadline',\r\n                message: 'Data inv√°lida'\r\n            });\r\n        }\r\n    }\r\n\r\n    // Stage v√°lido\r\n    const validStages = ['a_fazer', 'fazendo', 'concluido'];\r\n    if (data.stage && !validStages.includes(data.stage)) {\r\n        errors.push({\r\n            field: 'stage',\r\n            message: 'Stage inv√°lido'\r\n        });\r\n    }\r\n\r\n    return {\r\n        isValid: errors.length === 0,\r\n        errors\r\n    };\r\n}\r\n\r\n// ========== TRANSACTION VALIDATION ==========\r\nexport function validateTransaction(data: any): ValidationResult {\r\n    const errors: ValidationError[] = [];\r\n\r\n    // Amount obrigat√≥rio e > 0\r\n    if (!data.amount || data.amount <= 0) {\r\n        errors.push({\r\n            field: 'amount',\r\n            message: 'Valor deve ser maior que zero'\r\n        });\r\n    }\r\n\r\n    // Description obrigat√≥ria\r\n    if (!data.description || data.description.trim().length < 3) {\r\n        errors.push({\r\n            field: 'description',\r\n            message: 'Descri√ß√£o deve ter pelo menos 3 caracteres'\r\n        });\r\n    }\r\n\r\n    // Tipo v√°lido\r\n    if (!data.type || !['receita', 'despesa'].includes(data.type)) {\r\n        errors.push({\r\n            field: 'type',\r\n            message: 'Tipo deve ser \"receita\" ou \"despesa\"'\r\n        });\r\n    }\r\n\r\n    // Data v√°lida e n√£o futura\r\n    if (data.date) {\r\n        const transactionDate = new Date(data.date);\r\n        const today = new Date();\r\n        today.setHours(23, 59, 59, 999);\r\n\r\n        if (isNaN(transactionDate.getTime())) {\r\n            errors.push({\r\n                field: 'date',\r\n                message: 'Data inv√°lida'\r\n            });\r\n        } else if (transactionDate > today) {\r\n            errors.push({\r\n                field: 'date',\r\n                message: 'Data n√£o pode ser futura'\r\n            });\r\n        }\r\n    }\r\n\r\n    return {\r\n        isValid: errors.length === 0,\r\n        errors\r\n    };\r\n}\r\n\r\n// ========== FORMAT ERROR MESSAGES ==========\r\nexport function formatErrors(errors: ValidationError[]): string {\r\n    return errors.map(e => `${e.field}: ${e.message}`).join('\\n');\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/toast.ts"],"sourcesContent":["// Simple toast notification system\r\n\r\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\r\n\r\nexport interface ToastOptions {\r\n    message: string;\r\n    type?: ToastType;\r\n    duration?: number;\r\n}\r\n\r\nclass ToastManager {\r\n    private container: HTMLDivElement | null = null;\r\n\r\n    private getContainer(): HTMLDivElement {\r\n        if (!this.container) {\r\n            this.container = document.getElementById('toast-container') as HTMLDivElement;\r\n\r\n            if (!this.container) {\r\n                this.container = document.createElement('div');\r\n                this.container.id = 'toast-container';\r\n                this.container.style.cssText = `\r\n                    position: fixed;\r\n                    top: 20px;\r\n                    right: 20px;\r\n                    z-index: 99999;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    gap: 10px;\r\n                    pointer-events: none;\r\n                `;\r\n                document.body.appendChild(this.container);\r\n            }\r\n        }\r\n        return this.container;\r\n    }\r\n\r\n    show(options: ToastOptions) {\r\n        const { message, type = 'info', duration = 3000 } = options;\r\n\r\n        const toast = document.createElement('div');\r\n        toast.style.cssText = `\r\n            padding: 12px 20px;\r\n            border-radius: 8px;\r\n            color: white;\r\n            font-size: 14px;\r\n            font-weight: 500;\r\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n            pointer-events: auto;\r\n            animation: slideIn 0.3s ease;\r\n            max-width: 350px;\r\n            word-wrap: break-word;\r\n        `;\r\n\r\n        // Colors based on type\r\n        const colors = {\r\n            success: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n            error: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n            warning: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\r\n            info: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)'\r\n        };\r\n\r\n        toast.style.background = colors[type];\r\n        toast.textContent = message;\r\n\r\n        const container = this.getContainer();\r\n        container.appendChild(toast);\r\n\r\n        // Auto remove\r\n        setTimeout(() => {\r\n            toast.style.animation = 'slideOut 0.3s ease';\r\n            setTimeout(() => {\r\n                container.removeChild(toast);\r\n            }, 300);\r\n        }, duration);\r\n    }\r\n\r\n    success(message: string, duration?: number) {\r\n        this.show({ message, type: 'success', duration });\r\n    }\r\n\r\n    error(message: string, duration?: number) {\r\n        this.show({ message, type: 'error', duration });\r\n    }\r\n\r\n    warning(message: string, duration?: number) {\r\n        this.show({ message, type: 'warning', duration });\r\n    }\r\n\r\n    info(message: string, duration?: number) {\r\n        this.show({ message, type: 'info', duration });\r\n    }\r\n}\r\n\r\n// Add animations to document\r\nif (typeof document !== 'undefined') {\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n        @keyframes slideIn {\r\n            from {\r\n                transform: translateX(400px);\r\n                opacity: 0;\r\n            }\r\n            to {\r\n                transform: translateX(0);\r\n                opacity: 1;\r\n            }\r\n        }\r\n        \r\n        @keyframes slideOut {\r\n            from {\r\n                transform: translateX(0);\r\n                opacity: 1;\r\n            }\r\n            to {\r\n                transform: translateX(400px);\r\n                opacity: 0;\r\n            }\r\n        }\r\n    `;\r\n    document.head.appendChild(style);\r\n}\r\n\r\nexport const toast = new ToastManager();\r\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;AAUnC,MAAM;IACM,YAAmC,KAAK;IAExC,eAA+B;QACnC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACjB,IAAI,CAAC,SAAS,GAAG,SAAS,cAAc,CAAC;YAEzC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACjB,IAAI,CAAC,SAAS,GAAG,SAAS,aAAa,CAAC;gBACxC,IAAI,CAAC,SAAS,CAAC,EAAE,GAAG;gBACpB,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC;;;;;;;;;gBAShC,CAAC;gBACD,SAAS,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS;YAC5C;QACJ;QACA,OAAO,IAAI,CAAC,SAAS;IACzB;IAEA,KAAK,OAAqB,EAAE;QACxB,MAAM,EAAE,OAAO,EAAE,OAAO,MAAM,EAAE,WAAW,IAAI,EAAE,GAAG;QAEpD,MAAM,QAAQ,SAAS,aAAa,CAAC;QACrC,MAAM,KAAK,CAAC,OAAO,GAAG,CAAC;;;;;;;;;;;QAWvB,CAAC;QAED,uBAAuB;QACvB,MAAM,SAAS;YACX,SAAS;YACT,OAAO;YACP,SAAS;YACT,MAAM;QACV;QAEA,MAAM,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC,KAAK;QACrC,MAAM,WAAW,GAAG;QAEpB,MAAM,YAAY,IAAI,CAAC,YAAY;QACnC,UAAU,WAAW,CAAC;QAEtB,cAAc;QACd,WAAW;YACP,MAAM,KAAK,CAAC,SAAS,GAAG;YACxB,WAAW;gBACP,UAAU,WAAW,CAAC;YAC1B,GAAG;QACP,GAAG;IACP;IAEA,QAAQ,OAAe,EAAE,QAAiB,EAAE;QACxC,IAAI,CAAC,IAAI,CAAC;YAAE;YAAS,MAAM;YAAW;QAAS;IACnD;IAEA,MAAM,OAAe,EAAE,QAAiB,EAAE;QACtC,IAAI,CAAC,IAAI,CAAC;YAAE;YAAS,MAAM;YAAS;QAAS;IACjD;IAEA,QAAQ,OAAe,EAAE,QAAiB,EAAE;QACxC,IAAI,CAAC,IAAI,CAAC;YAAE;YAAS,MAAM;YAAW;QAAS;IACnD;IAEA,KAAK,OAAe,EAAE,QAAiB,EAAE;QACrC,IAAI,CAAC,IAAI,CAAC;YAAE;YAAS,MAAM;YAAQ;QAAS;IAChD;AACJ;AAEA,6BAA6B;AAC7B,IAAI,OAAO,aAAa,aAAa;IACjC,MAAM,QAAQ,SAAS,aAAa,CAAC;IACrC,MAAM,WAAW,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;IAsBrB,CAAC;IACD,SAAS,IAAI,CAAC,WAAW,CAAC;AAC9B;AAEO,MAAM,QAAQ,IAAI"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/store.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { Client, Task, PipelineStage, ProductionStage, Transaction } from './types';\r\nimport { supabase } from './supabaseClient';\r\nimport { validateClient, validateTask, validateTransaction, formatErrors } from './validation';\r\nimport { toast } from './toast';\r\n\r\ninterface AppContextType {\r\n    clients: Client[];\r\n    tasks: Task[];\r\n    transactions: Transaction[];\r\n    loading: boolean;\r\n    tasksLoading: boolean;\r\n    transactionsLoading: boolean;\r\n    // Clients\r\n    addClient: (client: Omit<Client, 'id'>) => Promise<void>;\r\n    updateClient: (id: number, data: Partial<Client>) => Promise<void>;\r\n    updateClientStage: (id: number, stage: PipelineStage) => Promise<void>;\r\n    deleteClient: (id: number) => Promise<void>;\r\n    refreshClients: () => Promise<void>;\r\n    // Tasks\r\n    addTask: (task: Omit<Task, 'id' | 'created_at' | 'updated_at'>) => Promise<void>;\r\n    updateTask: (id: string, data: Partial<Task>) => Promise<void>;\r\n    updateTaskStage: (id: string, stage: ProductionStage) => Promise<void>;\r\n    deleteTask: (id: string) => Promise<void>;\r\n    refreshTasks: () => Promise<void>;\r\n    // Transactions\r\n    addTransaction: (transaction: Omit<Transaction, 'id' | 'created_at' | 'updated_at'>) => Promise<void>;\r\n    updateTransaction: (id: string, data: Partial<Transaction>) => Promise<void>;\r\n    deleteTransaction: (id: string) => Promise<void>;\r\n    refreshTransactions: () => Promise<void>;\r\n}\r\n\r\nconst AppContext = createContext<AppContextType | undefined>(undefined);\r\n\r\nexport function AppProvider({ children }: { children: ReactNode }) {\r\n    const [clients, setClients] = useState<Client[]>([]);\r\n    const [tasks, setTasks] = useState<Task[]>([]);\r\n    const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [tasksLoading, setTasksLoading] = useState(true);\r\n    const [transactionsLoading, setTransactionsLoading] = useState(true);\r\n\r\n    // ========== CLIENTS CRUD (Supabase) ==========\r\n    const fetchClients = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('clients')\r\n                .select('*')\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (error) throw error;\r\n\r\n            if (data) {\r\n                setClients(data as Client[]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching clients:', error);\r\n            toast.error('Erro ao carregar clientes');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const refreshClients = async () => {\r\n        setLoading(true);\r\n        await fetchClients();\r\n    };\r\n\r\n    const addClient = async (clientData: Omit<Client, 'id'>) => {\r\n        try {\r\n            // Validate input\r\n            const validation = validateClient(clientData);\r\n            if (!validation.isValid) {\r\n                toast.error(formatErrors(validation.errors));\r\n                return;\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('clients')\r\n                .insert([{\r\n                    responsible_name: clientData.responsible_name,\r\n                    company_name: clientData.company_name,\r\n                    whatsapp: clientData.whatsapp,\r\n                    email: clientData.email || null,\r\n                    project_scope: clientData.project_scope,\r\n                    project_value: clientData.project_value,\r\n                    monthly_value: clientData.monthly_value || 0,\r\n                    start_date: clientData.start_date,\r\n                    pipeline_stage: clientData.pipeline_stage,\r\n                    production_stage: clientData.production_stage,\r\n                    status: clientData.status || 'ativo'\r\n                }])\r\n                .select()\r\n                .single();\r\n\r\n            if (error) throw error;\r\n\r\n            // Add credentials if provided\r\n            if (data && clientData.access_creds) {\r\n                const credPromises = Object.entries(clientData.access_creds).map(([platform, cred]) => {\r\n                    if (cred && cred.u) {\r\n                        return supabase.from('client_credentials').insert([{\r\n                            client_id: data.id,\r\n                            platform,\r\n                            username: cred.u,\r\n                            password: cred.p\r\n                        }]);\r\n                    }\r\n                });\r\n                await Promise.all(credPromises);\r\n            }\r\n\r\n            await fetchClients();\r\n            toast.success('Cliente adicionado com sucesso!');\r\n        } catch (error) {\r\n            console.error('Error adding client:', error);\r\n            toast.error('Erro ao adicionar cliente');\r\n        }\r\n    };\r\n\r\n    const updateClientStage = async (id: number, stage: PipelineStage) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('clients')\r\n                .update({ pipeline_stage: stage })\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            setClients(prev => prev.map(c => c.id === id ? { ...c, pipeline_stage: stage } : c));\r\n            toast.success('Stage atualizado!');\r\n        } catch (error) {\r\n            console.error('Error updating client stage:', error);\r\n            toast.error('Erro ao atualizar stage');\r\n        }\r\n    };\r\n\r\n    const deleteClient = async (id: number) => {\r\n        try {\r\n            // Confirmation prompt\r\n            if (typeof window !== 'undefined') {\r\n                const confirmed = window.confirm('Tem certeza que deseja deletar este cliente? Todas as tasks e transa√ß√µes relacionadas tamb√©m ser√£o removidas.');\r\n                if (!confirmed) return;\r\n            }\r\n\r\n            const { error } = await supabase\r\n                .from('clients')\r\n                .delete()\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            setClients(prev => prev.filter(c => c.id !== id));\r\n            toast.success('Cliente deletado com sucesso!');\r\n        } catch (error) {\r\n            console.error('Error deleting client:', error);\r\n            toast.error('Erro ao deletar cliente');\r\n        }\r\n    };\r\n\r\n    const updateClient = async (id: number, data: Partial<Client>) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('clients')\r\n                .update(data)\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            setClients(prev => prev.map(c =>\r\n                c.id === id ? { ...c, ...data } : c\r\n            ));\r\n            toast.success('Cliente atualizado!');\r\n        } catch (error) {\r\n            console.error('Error updating client:', error);\r\n            toast.error('Erro ao atualizar cliente');\r\n        }\r\n    };\r\n\r\n    // ========== TASKS CRUD (Supabase - MIGRADO!) ==========\r\n    const fetchTasks = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('tasks')\r\n                .select(`\r\n                    *,\r\n                    clients (company_name)\r\n                `)\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (error) throw error;\r\n\r\n            if (data) {\r\n                const enrichedTasks = data.map(task => ({\r\n                    ...task,\r\n                    client_name: task.clients?.company_name || 'Cliente Desconhecido'\r\n                }));\r\n                setTasks(enrichedTasks as Task[]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching tasks:', error);\r\n            toast.error('Erro ao carregar tasks');\r\n        } finally {\r\n            setTasksLoading(false);\r\n        }\r\n    };\r\n\r\n    const refreshTasks = async () => {\r\n        setTasksLoading(true);\r\n        await fetchTasks();\r\n    };\r\n\r\n    const addTask = async (taskData: Omit<Task, 'id' | 'created_at' | 'updated_at'>) => {\r\n        try {\r\n            // Validate input\r\n            const validation = validateTask(taskData);\r\n            if (!validation.isValid) {\r\n                toast.error(formatErrors(validation.errors));\r\n                return;\r\n            }\r\n\r\n            const { error } = await supabase\r\n                .from('tasks')\r\n                .insert([{\r\n                    title: taskData.title,\r\n                    description: taskData.description,\r\n                    type: taskData.type,\r\n                    stage: taskData.stage,\r\n                    client_id: taskData.client_id,\r\n                    due_date: taskData.due_date\r\n                }]);\r\n\r\n            if (error) throw error;\r\n\r\n            await fetchTasks();\r\n            toast.success('Task criada com sucesso!');\r\n        } catch (error) {\r\n            console.error('Error adding task:', error);\r\n            toast.error('Erro ao criar task');\r\n        }\r\n    };\r\n\r\n    const updateTask = async (id: string, taskData: Partial<Task>) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('tasks')\r\n                .update(taskData)\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            await fetchTasks();\r\n            toast.success('Task atualizada!');\r\n        } catch (error) {\r\n            console.error('Error updating task:', error);\r\n            toast.error('Erro ao atualizar task');\r\n        }\r\n    };\r\n\r\n    const updateTaskStage = async (id: string, stage: ProductionStage) => {\r\n        await updateTask(id, { stage });\r\n    };\r\n\r\n    const deleteTask = async (id: string) => {\r\n        try {\r\n            if (typeof window !== 'undefined') {\r\n                const confirmed = window.confirm('Tem certeza que deseja deletar esta task?');\r\n                if (!confirmed) return;\r\n            }\r\n\r\n            const { error } = await supabase\r\n                .from('tasks')\r\n                .delete()\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            setTasks(prev => prev.filter(t => t.id !== id));\r\n            toast.success('Task deletada!');\r\n        } catch (error) {\r\n            console.error('Error deleting task:', error);\r\n            toast.error('Erro ao deletar task');\r\n        }\r\n    };\r\n\r\n    // ========== TRANSACTIONS CRUD (Supabase - MIGRADO!) ==========\r\n    const fetchTransactions = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('transactions')\r\n                .select(`\r\n                    *,\r\n                    clients (company_name)\r\n                `)\r\n                .order('date', { ascending: false });\r\n\r\n            if (error) throw error;\r\n\r\n            if (data) {\r\n                const enrichedTransactions = data.map(trans => ({\r\n                    ...trans,\r\n                    client_name: trans.clients?.company_name\r\n                }));\r\n                setTransactions(enrichedTransactions as Transaction[]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching transactions:', error);\r\n            toast.error('Erro ao carregar transa√ß√µes');\r\n        } finally {\r\n            setTransactionsLoading(false);\r\n        }\r\n    };\r\n\r\n    const refreshTransactions = async () => {\r\n        setTransactionsLoading(true);\r\n        await fetchTransactions();\r\n    };\r\n\r\n    const addTransaction = async (transactionData: Omit<Transaction, 'id' | 'created_at' | 'updated_at'>) => {\r\n        try {\r\n            // Validate input\r\n            const validation = validateTransaction(transactionData);\r\n            if (!validation.isValid) {\r\n                toast.error(formatErrors(validation.errors));\r\n                return;\r\n            }\r\n\r\n            const { error } = await supabase\r\n                .from('transactions')\r\n                .insert([{\r\n                    client_id: transactionData.client_id || null,\r\n                    type: transactionData.type,\r\n                    category: transactionData.category,\r\n                    amount: transactionData.amount,\r\n                    description: transactionData.description,\r\n                    date: transactionData.date\r\n                }]);\r\n\r\n            if (error) throw error;\r\n\r\n            await fetchTransactions();\r\n            toast.success('Transa√ß√£o adicionada!');\r\n        } catch (error) {\r\n            console.error('Error adding transaction:', error);\r\n            toast.error('Erro ao adicionar transa√ß√£o');\r\n        }\r\n    };\r\n\r\n    const updateTransaction = async (id: string, transactionData: Partial<Transaction>) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('transactions')\r\n                .update(transactionData)\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            await fetchTransactions();\r\n            toast.success('Transa√ß√£o atualizada!');\r\n        } catch (error) {\r\n            console.error('Error updating transaction:', error);\r\n            toast.error('Erro ao atualizar transa√ß√£o');\r\n        }\r\n    };\r\n\r\n    const deleteTransaction = async (id: string) => {\r\n        try {\r\n            if (typeof window !== 'undefined') {\r\n                const confirmed = window.confirm('Tem certeza que deseja deletar esta transa√ß√£o?');\r\n                if (!confirmed) return;\r\n            }\r\n\r\n            const { error } = await supabase\r\n                .from('transactions')\r\n                .delete()\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            setTransactions(prev => prev.filter(t => t.id !== id));\r\n            toast.success('Transa√ß√£o deletada!');\r\n        } catch (error) {\r\n            console.error('Error deleting transaction:', error);\r\n            toast.error('Erro ao deletar transa√ß√£o');\r\n        }\r\n    };\r\n\r\n    // ========== INITIAL DATA LOAD ==========\r\n    useEffect(() => {\r\n        fetchClients();\r\n    }, []);\r\n\r\n    // Load tasks and transactions after clients are loaded\r\n    useEffect(() => {\r\n        if (clients.length > 0 || !loading) {\r\n            fetchTasks();\r\n            fetchTransactions();\r\n        }\r\n    }, [clients.length > 0, loading]);\r\n\r\n    return (\r\n        <AppContext.Provider value={{\r\n            clients,\r\n            tasks,\r\n            transactions,\r\n            loading,\r\n            tasksLoading,\r\n            transactionsLoading,\r\n            // Clients\r\n            addClient,\r\n            updateClient,\r\n            updateClientStage,\r\n            deleteClient,\r\n            refreshClients,\r\n            // Tasks\r\n            addTask,\r\n            updateTask,\r\n            updateTaskStage,\r\n            deleteTask,\r\n            refreshTasks,\r\n            // Transactions\r\n            addTransaction,\r\n            updateTransaction,\r\n            deleteTransaction,\r\n            refreshTransactions\r\n        }}>\r\n            {children}\r\n        </AppContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAppStore() {\r\n    const context = useContext(AppContext);\r\n    if (!context) throw new Error(\"useAppStore must be used within AppProvider\");\r\n    return context;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 861, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/useNotifications.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useAppStore } from './store';\r\nimport { AppNotification, NotificationType, NotificationPriority } from './notifications.types';\r\n\r\nconst STORAGE_KEY = 'ops_notifications';\r\n\r\nexport function useNotifications() {\r\n    const [notifications, setNotifications] = useState<AppNotification[]>([]);\r\n    const { clients, tasks, transactions } = useAppStore();\r\n\r\n    // Load from localStorage\r\n    useEffect(() => {\r\n        const stored = localStorage.getItem(STORAGE_KEY);\r\n        if (stored) {\r\n            try {\r\n                const parsed = JSON.parse(stored);\r\n                const withDates = parsed.map((n: any) => ({\r\n                    ...n,\r\n                    timestamp: new Date(n.timestamp)\r\n                }));\r\n                setNotifications(withDates);\r\n            } catch (e) {\r\n                console.error('Error loading notifications:', e);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // Save to localStorage\r\n    useEffect(() => {\r\n        if (notifications.length > 0 || localStorage.getItem(STORAGE_KEY)) {\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(notifications));\r\n        }\r\n    }, [notifications]);\r\n\r\n    // Create notification helper\r\n    const createNotification = useCallback((\r\n        type: NotificationType,\r\n        title: string,\r\n        message: string,\r\n        priority: NotificationPriority = 'medium',\r\n        actionUrl?: string,\r\n        actionLabel?: string\r\n    ) => {\r\n        const icons: Record<NotificationType, string> = {\r\n            deadline: '‚è∞',\r\n            followup: 'üìû',\r\n            financial: 'üí∞',\r\n            risk: '‚ö†Ô∏è',\r\n            achievement: 'üéâ',\r\n            suggestion: 'üí°'\r\n        };\r\n\r\n        const notification: AppNotification = {\r\n            id: `${Date.now()}-${Math.random()}`,\r\n            type,\r\n            title,\r\n            message,\r\n            icon: icons[type],\r\n            priority,\r\n            timestamp: new Date(),\r\n            read: false,\r\n            actionUrl,\r\n            actionLabel\r\n        };\r\n\r\n        setNotifications(prev => [notification, ...prev]);\r\n        return notification;\r\n    }, []);\r\n\r\n    // Check for deadlines - HARDENED\r\n    const checkDeadlines = useCallback(() => {\r\n        if (!tasks || tasks.length === 0) return;\r\n\r\n        const now = new Date();\r\n\r\n        tasks.forEach(task => {\r\n            try {\r\n                // Skip if no title\r\n                if (!task.title) return;\r\n\r\n                // Tasks don't have deadline property yet - skip for now\r\n                // This will be enabled when we add deadline field to tasks\r\n                /*\r\n                if (!task.deadline || task.stage === 'entregue') return;\r\n        \r\n                const deadline = new Date(task.deadline);\r\n                const diffDays = Math.ceil((deadline.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\r\n        \r\n                const alreadyNotified = notifications.some(n => \r\n                  n.message.includes(task.title) && \r\n                  n.type === 'deadline' &&\r\n                  !n.read\r\n                );\r\n        \r\n                if (alreadyNotified) return;\r\n        \r\n                if (diffDays === 0) {\r\n                  createNotification(\r\n                    'deadline',\r\n                    'Task vence hoje!',\r\n                    `\"${task.title}\" vence hoje`,\r\n                    'high',\r\n                    '/production',\r\n                    'Ver task'\r\n                  );\r\n                } else if (diffDays === 1) {\r\n                  createNotification(\r\n                    'deadline',\r\n                    'Task vence amanh√£',\r\n                    `\"${task.title}\" vence amanh√£`,\r\n                    'medium',\r\n                    '/production',\r\n                    'Ver task'\r\n                  );\r\n                }\r\n                */\r\n            } catch (err) {\r\n                console.error('Error checking deadline for task:', task, err);\r\n            }\r\n        });\r\n    }, [tasks, notifications, createNotification]);\r\n\r\n    // Check for client follow-ups - HARDENED\r\n    const checkFollowups = useCallback(() => {\r\n        if (!clients || clients.length === 0) return;\r\n\r\n        const now = new Date();\r\n\r\n        clients.forEach(client => {\r\n            try {\r\n                if (!client || !client.company_name) return;\r\n                if (client.status === 'inativo') return;\r\n\r\n                // Using created_at as proxy for last contact\r\n                const lastContactDate = client.created_at ? new Date(client.created_at) : new Date();\r\n                const daysSinceContact = Math.floor((now.getTime() - lastContactDate.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n                const alreadyNotified = notifications.some(n =>\r\n                    n.message?.includes(client.company_name || '') &&\r\n                    n.type === 'followup' &&\r\n                    !n.read\r\n                );\r\n\r\n                if (alreadyNotified) return;\r\n\r\n                if (daysSinceContact >= 30) {\r\n                    createNotification(\r\n                        'followup',\r\n                        'Cliente precisa de aten√ß√£o!',\r\n                        `${client.company_name} est√° h√° ${daysSinceContact} dias sem contato`,\r\n                        'high',\r\n                        '/clients',\r\n                        'Contactar agora'\r\n                    );\r\n                } else if (daysSinceContact >= 14) {\r\n                    createNotification(\r\n                        'followup',\r\n                        'Follow-up necess√°rio',\r\n                        `${client.company_name} est√° h√° ${daysSinceContact} dias sem contato`,\r\n                        'medium',\r\n                        '/clients',\r\n                        'Ver cliente'\r\n                    );\r\n                }\r\n            } catch (err) {\r\n                console.error('Error checking followup for client:', client, err);\r\n            }\r\n        });\r\n    }, [clients, notifications, createNotification]);\r\n\r\n    // Check financials - HARDENED\r\n    const checkFinancials = useCallback(() => {\r\n        if (!transactions || transactions.length === 0) return;\r\n\r\n        try {\r\n            const now = new Date();\r\n            const thisMonth = now.getMonth();\r\n            const thisYear = now.getFullYear();\r\n\r\n            const monthlyTransactions = transactions.filter(t => {\r\n                if (!t || !t.date) return false;\r\n                try {\r\n                    const date = new Date(t.date);\r\n                    return date.getMonth() === thisMonth && date.getFullYear() === thisYear;\r\n                } catch {\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            const revenue = monthlyTransactions\r\n                .filter(t => t.type === 'receita')\r\n                .reduce((sum, t) => sum + (t.amount || 0), 0);\r\n\r\n            const expenses = monthlyTransactions\r\n                .filter(t => t.type === 'despesa')\r\n                .reduce((sum, t) => sum + (t.amount || 0), 0);\r\n\r\n            const alreadyNotified = notifications.some(n =>\r\n                n.type === 'financial' &&\r\n                n.message?.includes('despesas') &&\r\n                !n.read\r\n            );\r\n\r\n            if (expenses > revenue && !alreadyNotified && expenses > 0) {\r\n                createNotification(\r\n                    'financial',\r\n                    'Aten√ß√£o √†s finan√ßas!',\r\n                    `Despesas (R$ ${expenses.toFixed(0)}) maiores que receita (R$ ${revenue.toFixed(0)}) este m√™s`,\r\n                    'high',\r\n                    '/financial',\r\n                    'Revisar'\r\n                );\r\n            }\r\n        } catch (err) {\r\n            console.error('Error checking financials:', err);\r\n        }\r\n    }, [transactions, notifications, createNotification]);\r\n\r\n    // Check risks - HARDENED\r\n    const checkRisks = useCallback(() => {\r\n        if (!clients || clients.length === 0) return;\r\n\r\n        try {\r\n            const inactiveClients = clients.filter(c => c?.status === 'inativo').length;\r\n\r\n            const alreadyNotified = notifications.some(n =>\r\n                n.type === 'risk' &&\r\n                n.message?.includes('inativos') &&\r\n                !n.read\r\n            );\r\n\r\n            if (inactiveClients >= 3 && !alreadyNotified) {\r\n                createNotification(\r\n                    'risk',\r\n                    'Muitos clientes inativos',\r\n                    `Voc√™ tem ${inactiveClients} clientes inativos. Considere reativa√ß√£o.`,\r\n                    'medium',\r\n                    '/clients',\r\n                    'Ver clientes'\r\n                );\r\n            }\r\n        } catch (err) {\r\n            console.error('Error checking risks:', err);\r\n        }\r\n    }, [clients, notifications, createNotification]);\r\n\r\n    // Run all checks - SAFE\r\n    const runAllChecks = useCallback(() => {\r\n        try {\r\n            checkDeadlines();\r\n            checkFollowups();\r\n            checkFinancials();\r\n            checkRisks();\r\n        } catch (err) {\r\n            console.error('Error running notification checks:', err);\r\n        }\r\n    }, [checkDeadlines, checkFollowups, checkFinancials, checkRisks]);\r\n\r\n    // Auto-check every 60 seconds\r\n    useEffect(() => {\r\n        runAllChecks();\r\n\r\n        const interval = setInterval(() => {\r\n            runAllChecks();\r\n        }, 60000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [runAllChecks]);\r\n\r\n    // Mark as read\r\n    const markAsRead = useCallback((id: string) => {\r\n        setNotifications(prev =>\r\n            prev.map(n => n.id === id ? { ...n, read: true } : n)\r\n        );\r\n    }, []);\r\n\r\n    // Mark all as read\r\n    const markAllAsRead = useCallback(() => {\r\n        setNotifications(prev =>\r\n            prev.map(n => ({ ...n, read: true }))\r\n        );\r\n    }, []);\r\n\r\n    // Clear all\r\n    const clearAll = useCallback(() => {\r\n        setNotifications([]);\r\n        localStorage.removeItem(STORAGE_KEY);\r\n    }, []);\r\n\r\n    // Delete one\r\n    const deleteNotification = useCallback((id: string) => {\r\n        setNotifications(prev => prev.filter(n => n.id !== id));\r\n    }, []);\r\n\r\n    const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n    return {\r\n        notifications,\r\n        unreadCount,\r\n        markAsRead,\r\n        markAllAsRead,\r\n        clearAll,\r\n        deleteNotification,\r\n        createNotification\r\n    };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1194, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/NotificationContext.tsx"],"sourcesContent":["\"use client\";\r\nimport { createContext, useContext, ReactNode } from 'react';\r\nimport { useNotifications } from './useNotifications';\r\n\r\ninterface NotificationContextType {\r\n    notifications: any[];\r\n    unreadCount: number;\r\n    markAsRead: (id: string) => void;\r\n    markAllAsRead: () => void;\r\n    clearAll: () => void;\r\n    deleteNotification: (id: string) => void;\r\n    createNotification: any;\r\n}\r\n\r\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\r\n\r\nexport function NotificationProvider({ children }: { children: ReactNode }) {\r\n    const notificationData = useNotifications();\r\n\r\n    return (\r\n        <NotificationContext.Provider value={notificationData}>\r\n            {children}\r\n        </NotificationContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useNotificationContext() {\r\n    const context = useContext(NotificationContext);\r\n    if (context === undefined) {\r\n        throw new Error('useNotificationContext must be used within NotificationProvider');\r\n    }\r\n    return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;AAFA;;;AAcA,MAAM,oCAAsB,IAAA,8KAAa,EAAsC;AAExE,SAAS,qBAAqB,EAAE,QAAQ,EAA2B;;IACtE,MAAM,mBAAmB,IAAA,+IAAgB;IAEzC,qBACI,6LAAC,oBAAoB,QAAQ;QAAC,OAAO;kBAChC;;;;;;AAGb;GARgB;;QACa,+IAAgB;;;KAD7B;AAUT,SAAS;;IACZ,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 1245, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/NotificationBell.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from 'react';\r\nimport { Bell, X, Check, Trash2 } from 'lucide-react';\r\nimport { useNotificationContext } from '@/lib/NotificationContext';\r\nimport { clsx } from 'clsx';\r\nimport Link from 'next/link';\r\n\r\nexport function NotificationBell() {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [filter, setFilter] = useState<'all' | 'unread'>('all');\r\n    const { notifications, unreadCount, markAsRead, markAllAsRead, deleteNotification } = useNotificationContext();\r\n\r\n    const filteredNotifications = filter === 'unread'\r\n        ? notifications.filter(n => !n.read)\r\n        : notifications;\r\n\r\n    const getPriorityColor = (priority: string) => {\r\n        switch (priority) {\r\n            case 'high': return 'border-red-500';\r\n            case 'medium': return 'border-orange-500';\r\n            case 'low': return 'border-blue-500';\r\n            default: return 'border-slate-700';\r\n        }\r\n    };\r\n\r\n    const formatTimeAgo = (date: Date) => {\r\n        const seconds = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);\r\n\r\n        if (seconds < 60) return 'agora mesmo';\r\n        if (seconds < 3600) return `${Math.floor(seconds / 60)}m atr√°s`;\r\n        if (seconds < 86400) return `${Math.floor(seconds / 3600)}h atr√°s`;\r\n        return `${Math.floor(seconds / 86400)}d atr√°s`;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Bell Button */}\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"relative p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\r\n            >\r\n                <Bell className={clsx(\r\n                    \"w-5 h-5\",\r\n                    unreadCount > 0 && \"animate-[ring_2s_ease-in-out_infinite]\"\r\n                )} />\r\n\r\n                {unreadCount > 0 && (\r\n                    <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse\">\r\n                        {unreadCount > 9 ? '9+' : unreadCount}\r\n                    </span>\r\n                )}\r\n            </button>\r\n\r\n            {/* Backdrop */}\r\n            {isOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 z-40\"\r\n                    onClick={() => setIsOpen(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Notification Center */}\r\n            {isOpen && (\r\n                <div className=\"fixed top-16 right-4 w-96 max-h-[600px] bg-slate-900 border border-slate-800 rounded-xl shadow-2xl z-50 flex flex-col\">\r\n                    {/* Header */}\r\n                    <div className=\"p-4 border-b border-slate-800\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <h3 className=\"font-semibold text-white\">Notifica√ß√µes</h3>\r\n                            <button\r\n                                onClick={() => setIsOpen(false)}\r\n                                className=\"p-1 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\r\n                            >\r\n                                <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Tabs */}\r\n                        <div className=\"flex gap-2 mb-2\">\r\n                            <button\r\n                                onClick={() => setFilter('all')}\r\n                                className={clsx(\r\n                                    \"flex-1 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors\",\r\n                                    filter === 'all'\r\n                                        ? \"bg-violet-600 text-white\"\r\n                                        : \"bg-slate-800 text-slate-400 hover:text-white\"\r\n                                )}\r\n                            >\r\n                                Todas ({notifications.length})\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setFilter('unread')}\r\n                                className={clsx(\r\n                                    \"flex-1 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors\",\r\n                                    filter === 'unread'\r\n                                        ? \"bg-violet-600 text-white\"\r\n                                        : \"bg-slate-800 text-slate-400 hover:text-white\"\r\n                                )}\r\n                            >\r\n                                N√£o lidas ({unreadCount})\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Actions */}\r\n                        {notifications.length > 0 && (\r\n                            <button\r\n                                onClick={markAllAsRead}\r\n                                className=\"text-xs text-violet-400 hover:text-violet-300 transition-colors flex items-center gap-1\"\r\n                            >\r\n                                <Check className=\"w-3 h-3\" />\r\n                                Marcar todas como lidas\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Notification List */}\r\n                    <div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-800 scrollbar-track-transparent\">\r\n                        {filteredNotifications.length === 0 ? (\r\n                            <div className=\"flex flex-col items-center justify-center h-40 text-center opacity-50\">\r\n                                <Bell className=\"w-12 h-12 text-slate-700 mb-2\" />\r\n                                <p className=\"text-sm text-slate-500\">\r\n                                    {filter === 'unread' ? 'Nenhuma notifica√ß√£o n√£o lida' : 'Nenhuma notifica√ß√£o'}\r\n                                </p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-2 space-y-2\">\r\n                                {filteredNotifications.map((notification) => (\r\n                                    <div\r\n                                        key={notification.id}\r\n                                        className={clsx(\r\n                                            \"p-3 rounded-lg border-l-3 transition-all group hover:bg-slate-800/50\",\r\n                                            !notification.read ? \"bg-slate-900\" : \"bg-slate-950/50 opacity-70\",\r\n                                            getPriorityColor(notification.priority)\r\n                                        )}\r\n                                    >\r\n                                        <div className=\"flex gap-3\">\r\n                                            <div className=\"text-2xl shrink-0\">{notification.icon}</div>\r\n\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <div className=\"flex items-start justify-between gap-2 mb-1\">\r\n                                                    <h4 className=\"font-medium text-sm text-white truncate\">\r\n                                                        {notification.title}\r\n                                                    </h4>\r\n                                                    <button\r\n                                                        onClick={() => deleteNotification(notification.id)}\r\n                                                        className=\"opacity-0 group-hover:opacity-100 p-1 text-slate-500 hover:text-red-400 transition-all\"\r\n                                                    >\r\n                                                        <Trash2 className=\"w-3 h-3\" />\r\n                                                    </button>\r\n                                                </div>\r\n\r\n                                                <p className=\"text-xs text-slate-400 mb-2\">{notification.message}</p>\r\n\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <span className=\"text-xs text-slate-600\">\r\n                                                        {formatTimeAgo(notification.timestamp)}\r\n                                                    </span>\r\n\r\n                                                    <div className=\"flex gap-2\">\r\n                                                        {!notification.read && (\r\n                                                            <button\r\n                                                                onClick={() => markAsRead(notification.id)}\r\n                                                                className=\"text-xs text-violet-400 hover:text-violet-300 transition-colors\"\r\n                                                            >\r\n                                                                Marcar lida\r\n                                                            </button>\r\n                                                        )}\r\n\r\n                                                        {notification.actionUrl && (\r\n                                                            <Link\r\n                                                                href={notification.actionUrl}\r\n                                                                onClick={() => {\r\n                                                                    markAsRead(notification.id);\r\n                                                                    setIsOpen(false);\r\n                                                                }}\r\n                                                                className=\"text-xs text-violet-400 hover:text-violet-300 font-medium transition-colors\"\r\n                                                            >\r\n                                                                {notification.actionLabel || 'Ver'}\r\n                                                            </Link>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <style jsx global>{`\r\n        @keyframes ring {\r\n          0%, 100% { transform: rotate(0deg); }\r\n          10%, 30% { transform: rotate(-10deg); }\r\n          20%, 40% { transform: rotate(10deg); }\r\n        }\r\n      `}</style>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1611, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n    LayoutDashboard,\r\n    Users,\r\n    CheckSquare,\r\n    Palette,\r\n    DollarSign,\r\n    LogOut,\r\n    Lightbulb,\r\n    User,\r\n    Wand2,\r\n    Zap\r\n} from \"lucide-react\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport { NotificationBell } from './NotificationBell';\r\n\r\nconst menuItems = [\r\n    { name: 'Dashboard', path: '/', icon: LayoutDashboard },\r\n    { name: 'Clientes', path: '/clients', icon: Users },\r\n    { name: 'Rotina', path: '/routine', icon: CheckSquare },\r\n    { name: 'Produ√ß√£o', path: '/production', icon: Palette },\r\n    { name: 'Financeiro', path: '/financial', icon: DollarSign },\r\n    { name: 'Estrat√©gia IA', path: '/strategy', icon: Lightbulb },\r\n    { name: 'Content Studio', path: '/content-studio', icon: Wand2 },\r\n    { name: 'Automa√ß√µes', path: '/automations', icon: Zap },\r\n];\r\n\r\ninterface SidebarProps {\r\n    isMobileOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function Sidebar({ isMobileOpen, onClose }: SidebarProps) {\r\n    const pathname = usePathname();\r\n    const { profile, logout } = useAuth();\r\n\r\n    const handleLogout = () => {\r\n        if (confirm('Deseja realmente sair?')) {\r\n            logout();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Overlay for mobile */}\r\n            {isMobileOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden\"\r\n                    onClick={onClose}\r\n                />\r\n            )}\r\n\r\n            {/* Sidebar */}\r\n            <aside className={`\r\n                w-64 bg-slate-950 border-r border-slate-900 flex flex-col h-screen fixed left-0 top-0 z-50 transition-transform duration-300 ease-in-out\r\n                ${isMobileOpen ? 'translate-x-0' : '-translate-x-full'}\r\n                md:translate-x-0\r\n            `}>\r\n                {/* Header with LARGE Logo + Notification Bell */}\r\n                <div className=\"p-6 pb-4 border-b border-slate-900\">\r\n                    <img\r\n                        src=\"/logo-full.png\"\r\n                        alt=\"OPS Operation\"\r\n                        className=\"h-14 w-full object-contain mb-4\"\r\n                    />\r\n                    <div className=\"flex justify-start pl-1\">\r\n                        <NotificationBell />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <nav className=\"flex-1 px-4 space-y-2 mt-4\">\r\n                    {menuItems.map((item) => {\r\n                        const isActive = pathname === item.path;\r\n                        return (\r\n                            <Link\r\n                                key={item.path}\r\n                                href={item.path}\r\n                                onClick={onClose}\r\n                                className={`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all ${isActive\r\n                                    ? \"bg-violet-600/10 text-violet-400 border border-violet-600/20\"\r\n                                    : \"text-slate-400 hover:text-white hover:bg-slate-900\"\r\n                                    }`}\r\n                            >\r\n                                <item.icon size={20} className={isActive ? \"text-violet-400\" : \"text-slate-500\"} />\r\n                                {item.name}\r\n                            </Link>\r\n                        );\r\n                    })}\r\n                </nav>\r\n\r\n                {/* Footer - User Card */}\r\n                <div className=\"p-4 border-t border-slate-900 space-y-2\">\r\n                    {/* Current User */}\r\n                    <div className=\"bg-slate-900/50 border border-slate-800 rounded-lg p-3 mb-2\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-8 h-8 bg-violet-600/10 border border-violet-600/20 rounded-lg flex items-center justify-center\">\r\n                                <User className=\"w-4 h-4 text-violet-400\" />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <p className=\"text-sm font-medium text-white\">{profile?.username || 'User'}</p>\r\n                                <p className=\"text-xs text-slate-500\">Colaborador</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Logout Button */}\r\n                    <button\r\n                        onClick={handleLogout}\r\n                        className=\"flex items-center gap-3 px-4 py-3 text-slate-500 hover:text-red-400 hover:bg-slate-900 rounded-lg transition-colors w-full text-sm font-medium\"\r\n                    >\r\n                        <LogOut size={18} />\r\n                        Sair\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;;;AAhBA;;;;;;AAkBA,MAAM,YAAY;IACd;QAAE,MAAM;QAAa,MAAM;QAAK,MAAM,kPAAe;IAAC;IACtD;QAAE,MAAM;QAAY,MAAM;QAAY,MAAM,gNAAK;IAAC;IAClD;QAAE,MAAM;QAAU,MAAM;QAAY,MAAM,sOAAW;IAAC;IACtD;QAAE,MAAM;QAAY,MAAM;QAAe,MAAM,sNAAO;IAAC;IACvD;QAAE,MAAM;QAAc,MAAM;QAAc,MAAM,mOAAU;IAAC;IAC3D;QAAE,MAAM;QAAiB,MAAM;QAAa,MAAM,4NAAS;IAAC;IAC5D;QAAE,MAAM;QAAkB,MAAM;QAAmB,MAAM,oNAAK;IAAC;IAC/D;QAAE,MAAM;QAAc,MAAM;QAAgB,MAAM,0MAAG;IAAC;CACzD;AAOc,SAAS,QAAQ,EAAE,YAAY,EAAE,OAAO,EAAgB;;IACnE,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,0HAAO;IAEnC,MAAM,eAAe;QACjB,IAAI,QAAQ,2BAA2B;YACnC;QACJ;IACJ;IAEA,qBACI;;YAEK,8BACG,6LAAC;gBACG,WAAU;gBACV,SAAS;;;;;;0BAKjB,6LAAC;gBAAM,WAAW,CAAC;;gBAEf,EAAE,eAAe,kBAAkB,oBAAoB;;YAE3D,CAAC;;kCAEG,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCACG,KAAI;gCACJ,KAAI;gCACJ,WAAU;;;;;;0CAEd,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC,sJAAgB;;;;;;;;;;;;;;;;kCAKzB,6LAAC;wBAAI,WAAU;kCACV,UAAU,GAAG,CAAC,CAAC;4BACZ,MAAM,WAAW,aAAa,KAAK,IAAI;4BACvC,qBACI,6LAAC,0KAAI;gCAED,MAAM,KAAK,IAAI;gCACf,SAAS;gCACT,WAAW,CAAC,gFAAgF,EAAE,WACxF,iEACA,sDACA;;kDAEN,6LAAC,KAAK,IAAI;wCAAC,MAAM;wCAAI,WAAW,WAAW,oBAAoB;;;;;;oCAC9D,KAAK,IAAI;;+BATL,KAAK,IAAI;;;;;wBAY1B;;;;;;kCAIJ,6LAAC;wBAAI,WAAU;;0CAEX,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDACX,cAAA,6LAAC,6MAAI;gDAAC,WAAU;;;;;;;;;;;sDAEpB,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAE,WAAU;8DAAkC,SAAS,YAAY;;;;;;8DACpE,6LAAC;oDAAE,WAAU;8DAAyB;;;;;;;;;;;;;;;;;;;;;;;0CAMlD,6LAAC;gCACG,SAAS;gCACT,WAAU;;kDAEV,6LAAC,uNAAM;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;;;;;;;;;;;;;;AAO5C;GAtFwB;;QACH,oJAAW;QACA,0HAAO;;;KAFf"}},
    {"offset": {"line": 1873, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/usePageContext.tsx"],"sourcesContent":["\"use client\";\r\nimport { usePathname } from 'next/navigation';\r\nimport { useAppStore } from './store';\r\nimport { useMemo } from 'react';\r\n\r\nexport type PageType = 'dashboard' | 'clients' | 'routine' | 'production' | 'financial' | 'strategy' | 'tools';\r\n\r\nexport interface PageContext {\r\n    page: PageType;\r\n    title: string;\r\n    icon: string;\r\n    data: any;\r\n    suggestions: string[];\r\n    quickActions: QuickAction[];\r\n}\r\n\r\nexport interface QuickAction {\r\n    id: string;\r\n    label: string;\r\n    icon: string;\r\n    prompt: string;\r\n}\r\n\r\nexport function usePageContext(): PageContext {\r\n    const pathname = usePathname();\r\n    const { clients, tasks, transactions } = useAppStore();\r\n\r\n    return useMemo(() => {\r\n        // Dashboard\r\n        if (pathname === '/') {\r\n            const activeClients = clients.filter(c => c.status === 'ativo').length;\r\n            const revenue = transactions\r\n                .filter(t => t.type === 'receita')\r\n                .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n            return {\r\n                page: 'dashboard',\r\n                title: 'Dashboard',\r\n                icon: 'üìä',\r\n                data: {\r\n                    activeClients,\r\n                    revenue,\r\n                    totalClients: clients.length,\r\n                    totalTasks: tasks.length\r\n                },\r\n                suggestions: [\r\n                    activeClients < 5 ? '‚ö†Ô∏è Poucos clientes ativos. Considere prospec√ß√£o.' : '',\r\n                    revenue < 10000 ? 'üí∞ Receita baixa este m√™s. Foque em vendas!' : ''\r\n                ].filter(Boolean),\r\n                quickActions: [\r\n                    { id: 'analyze', label: 'Analisar Performance', icon: 'üéØ', prompt: 'Analise o desempenho geral da ag√™ncia e sugira melhorias' },\r\n                    { id: 'report', label: 'Gerar Relat√≥rio', icon: 'üìä', prompt: 'Gere um relat√≥rio executivo do m√™s atual' },\r\n                    { id: 'suggestions', label: 'Sugest√µes', icon: 'üí°', prompt: 'D√™ 5 sugest√µes acion√°veis para melhorar resultados' }\r\n                ]\r\n            };\r\n        }\r\n\r\n        // Clients\r\n        if (pathname === '/clients') {\r\n            const inactiveClients = clients.filter(c => c.status === 'inativo').length;\r\n\r\n            return {\r\n                page: 'clients',\r\n                title: 'Clientes',\r\n                icon: 'üë•',\r\n                data: {\r\n                    totalClients: clients.length,\r\n                    inactiveClients,\r\n                    clients: clients.slice(0, 5) // Top 5 para contexto\r\n                },\r\n                suggestions: [\r\n                    inactiveClients > 0 ? `üíº ${inactiveClients} clientes inativos. Reativar?` : ''\r\n                ].filter(Boolean),\r\n                quickActions: [\r\n                    { id: 'contact', label: 'Quem Contactar Hoje', icon: 'üìû', prompt: 'Liste os 3 clientes que devo contactar hoje baseado em quando foi o √∫ltimo contato' },\r\n                    { id: 'upsell', label: 'Oportunidades Upsell', icon: 'üí∞', prompt: 'Analise quais clientes t√™m maior potencial de upsell e novos servi√ßos' },\r\n                    { id: 'risk', label: 'Clientes em Risco', icon: '‚ö†Ô∏è', prompt: 'Identifique clientes em risco de churn e sugira a√ß√µes' }\r\n                ]\r\n            };\r\n        }\r\n\r\n        // Routine\r\n        if (pathname === '/routine') {\r\n            return {\r\n                page: 'routine',\r\n                title: 'Rotina',\r\n                icon: '‚úÖ',\r\n                data: {\r\n                    tasks: tasks.length\r\n                },\r\n                suggestions: [],\r\n                quickActions: [\r\n                    { id: 'prioritize', label: 'Priorizar Tasks', icon: 'üéØ', prompt: 'Me ajude a priorizar minhas tarefas de hoje' },\r\n                    { id: 'next', label: 'Pr√≥ximas A√ß√µes', icon: '‚è∞', prompt: 'Quais as 3 pr√≥ximas a√ß√µes mais importantes que devo fazer?' },\r\n                    { id: 'optimize', label: 'Otimizar Agenda', icon: 'üìÖ', prompt: 'Como otimizar minha agenda para ser mais produtivo hoje?' }\r\n                ]\r\n            };\r\n        }\r\n\r\n        // Production\r\n        if (pathname === '/production') {\r\n            const activeTasks = tasks.filter(t => t.stage !== 'concluido' && t.stage !== 'entregue');\r\n\r\n            return {\r\n                page: 'production',\r\n                title: 'Produ√ß√£o',\r\n                icon: 'üé®',\r\n                data: {\r\n                    tasks: activeTasks,\r\n                    totalTasks: tasks.length\r\n                },\r\n                suggestions: [\r\n                    activeTasks.length > 10 ? 'üö® Muitos projetos em andamento. Priorize!' : ''\r\n                ].filter(Boolean),\r\n                quickActions: [\r\n                    { id: 'creative', label: 'Ideias Criativas', icon: 'üé®', prompt: 'Gere 5 ideias criativas para conte√∫do de redes sociais' },\r\n                    { id: 'briefing', label: 'Gerar Briefing', icon: 'üìù', prompt: 'Crie um template de briefing criativo completo' },\r\n                    { id: 'copy', label: 'Escrever Copy', icon: '‚úçÔ∏è', prompt: 'Escreva uma copy persuasiva para um an√∫ncio de produto' }\r\n                ]\r\n            };\r\n        }\r\n\r\n        // Financial\r\n        if (pathname === '/financial') {\r\n            const revenue = transactions\r\n                .filter(t => t.type === 'receita')\r\n                .reduce((sum, t) => sum + t.amount, 0);\r\n            const expenses = transactions\r\n                .filter(t => t.type === 'despesa')\r\n                .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n            return {\r\n                page: 'financial',\r\n                title: 'Financeiro',\r\n                icon: 'üí∞',\r\n                data: {\r\n                    revenue,\r\n                    expenses,\r\n                    profit: revenue - expenses,\r\n                    transactions: transactions.length\r\n                },\r\n                suggestions: [\r\n                    expenses > revenue ? '‚ö†Ô∏è Despesas maiores que receita! Aten√ß√£o!' : ''\r\n                ].filter(Boolean),\r\n                quickActions: [\r\n                    { id: 'reduce', label: 'Reduzir Custos', icon: 'üí∞', prompt: 'Analise minhas despesas e sugira onde posso reduzir custos' },\r\n                    { id: 'forecast', label: 'Previs√£o de Receita', icon: 'üìà', prompt: 'Preveja a receita dos pr√≥ximos 3 meses baseado no hist√≥rico' },\r\n                    { id: 'analyze', label: 'An√°lise Completa', icon: 'üìä', prompt: 'Fa√ßa uma an√°lise financeira completa e sugira melhorias' }\r\n                ]\r\n            };\r\n        }\r\n\r\n        // Strategy (j√° tem chat pr√≥prio)\r\n        if (pathname === '/strategy') {\r\n            return {\r\n                page: 'strategy',\r\n                title: 'Estrat√©gia IA',\r\n                icon: 'ü§ñ',\r\n                data: {},\r\n                suggestions: ['üìå Esta p√°gina tem chat IA dedicado'],\r\n                quickActions: []\r\n            };\r\n        }\r\n\r\n        // Default\r\n        return {\r\n            page: 'dashboard',\r\n            title: 'OPS Operation',\r\n            icon: 'üè¢',\r\n            data: {},\r\n            suggestions: [],\r\n            quickActions: []\r\n        };\r\n    }, [pathname, clients, tasks, transactions]);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/AIAssistant.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Sparkles, X, Send, Bot, User, Zap } from 'lucide-react';\r\nimport { clsx } from 'clsx';\r\nimport { usePageContext } from '@/lib/usePageContext';\r\n\r\ntype Message = {\r\n    role: 'user' | 'assistant';\r\n    content: string;\r\n};\r\n\r\nexport function AIAssistant() {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [input, setInput] = useState(\"\");\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Get page context\r\n    const context = usePageContext();\r\n    const hasSuggestions = context.suggestions.length > 0;\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages, isLoading]);\r\n\r\n    const handleSubmit = async (userMessage?: string) => {\r\n        const messageToSend = userMessage || input.trim();\r\n        if (!messageToSend || isLoading) return;\r\n\r\n        setInput(\"\");\r\n        setMessages(prev => [...prev, { role: 'user', content: messageToSend }]);\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const res = await fetch('/api/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: messageToSend,\r\n                    context: {\r\n                        page: context.page,\r\n                        data: context.data\r\n                    }\r\n                }),\r\n            });\r\n\r\n            const data = await res.json();\r\n            const reply = data.reply || \"Erro ao obter resposta.\";\r\n\r\n            setMessages(prev => [...prev, { role: 'assistant', content: reply }]);\r\n        } catch (error) {\r\n            console.error(error);\r\n            setMessages(prev => [...prev, { role: 'assistant', content: \"Erro de conex√£o. Verifique o console.\" }]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleQuickAction = (prompt: string) => {\r\n        handleSubmit(prompt);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Floating Button */}\r\n            <button\r\n                onClick={() => setIsOpen(true)}\r\n                className={clsx(\r\n                    \"fixed bottom-6 right-6 w-14 h-14 rounded-full bg-gradient-to-r from-violet-600 to-indigo-600 shadow-xl shadow-violet-900/30 text-white flex items-center justify-center transition-all duration-300 hover:scale-110 active:scale-95 z-50 hover:shadow-violet-900/50 group\",\r\n                    isOpen && \"scale-0 opacity-0 pointer-events-none\"\r\n                )}\r\n                title={`IA ‚Ä¢ ${context.title}`}\r\n            >\r\n                <Sparkles className=\"w-6 h-6 animate-pulse\" />\r\n\r\n                {/* Suggestion Badge */}\r\n                {hasSuggestions && !isOpen && (\r\n                    <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse border-2 border-slate-950\"></span>\r\n                )}\r\n            </button>\r\n\r\n            {/* Backdrop */}\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity\" onClick={() => setIsOpen(false)} />\r\n            )}\r\n\r\n            {/* Modal */}\r\n            <div className={clsx(\r\n                \"fixed inset-y-0 right-0 w-full md:w-[450px] bg-slate-950 border-l border-slate-800 shadow-2xl transform transition-transform duration-300 ease-in-out z-50 flex flex-col\",\r\n                isOpen ? \"translate-x-0\" : \"translate-x-full\"\r\n            )}>\r\n                {/* Header with Context Badge */}\r\n                <div className=\"p-4 border-b border-slate-800 flex flex-col gap-3 bg-slate-950 shadow-sm z-10\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"p-1.5 rounded-md bg-violet-500/10 text-violet-400\">\r\n                                <Sparkles className=\"w-5 h-5\" />\r\n                            </div>\r\n                            <span className=\"font-bold text-slate-100\">AI Assistant</span>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setIsOpen(false)}\r\n                            className=\"p-1.5 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-colors\"\r\n                        >\r\n                            <X className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Context Badge */}\r\n                    <div className=\"flex items-center gap-2 px-3 py-2 bg-slate-900/50 rounded-lg border border-slate-800\">\r\n                        <span className=\"text-lg\">{context.icon}</span>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <p className=\"text-xs font-medium text-slate-400\">Analisando</p>\r\n                            <p className=\"text-sm text-white font-semibold truncate\">{context.title}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Suggestions Alert */}\r\n                    {hasSuggestions && (\r\n                        <div className=\"p-2 bg-amber-500/10 border border-amber-500/20 rounded-lg\">\r\n                            <p className=\"text-xs text-amber-300 font-medium\">üí° {context.suggestions[0]}</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                {context.quickActions.length > 0 && messages.length === 0 && (\r\n                    <div className=\"p-4 border-b border-slate-800 bg-slate-950/30\">\r\n                        <p className=\"text-xs font-medium text-slate-500 mb-2\">A√ß√µes R√°pidas</p>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {context.quickActions.map((action) => (\r\n                                <button\r\n                                    key={action.id}\r\n                                    onClick={() => handleQuickAction(action.prompt)}\r\n                                    disabled={isLoading}\r\n                                    className=\"px-3 py-1.5 bg-slate-900 hover:bg-violet-600 border border-slate-800 hover:border-violet-600 rounded-lg text-xs font-medium text-slate-300 hover:text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5\"\r\n                                >\r\n                                    <span>{action.icon}</span>\r\n                                    <span>{action.label}</span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Messages */}\r\n                <div className=\"flex-1 p-4 overflow-y-auto bg-slate-950/50 relative scrollbar-thin scrollbar-thumb-slate-800 scrollbar-track-transparent\">\r\n                    {messages.length === 0 ? (\r\n                        <div className=\"h-full flex flex-col items-center justify-center text-center opacity-50\">\r\n                            <div className=\"w-16 h-16 bg-slate-900 rounded-full flex items-center justify-center border border-slate-800 mb-4 shadow-inner\">\r\n                                <Sparkles className=\"w-8 h-8 text-violet-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-slate-200 font-medium mb-2\">OPS Intelligence</h3>\r\n                            <p className=\"text-sm text-slate-500 px-8\">\r\n                                {context.page === 'strategy'\r\n                                    ? 'Use o chat dedicado desta p√°gina'\r\n                                    : `Pronto para analisar ${context.title.toLowerCase()}`\r\n                                }\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-4\">\r\n                            {messages.map((msg, idx) => (\r\n                                <div key={idx} className={clsx(\"flex gap-3\", msg.role === 'user' ? \"flex-row-reverse\" : \"flex-row\")}>\r\n                                    <div className={clsx(\r\n                                        \"w-8 h-8 rounded-full flex items-center justify-center shrink-0\",\r\n                                        msg.role === 'user' ? \"bg-indigo-600\" : \"bg-slate-800\"\r\n                                    )}>\r\n                                        {msg.role === 'user' ? <User className=\"w-4 h-4 text-white\" /> : <Bot className=\"w-4 h-4 text-violet-400\" />}\r\n                                    </div>\r\n                                    <div className={clsx(\r\n                                        \"p-3 rounded-2xl max-w-[80%] text-sm whitespace-pre-wrap\",\r\n                                        msg.role === 'user' ? \"bg-indigo-600 text-white rounded-tr-none\" : \"bg-slate-800 text-slate-200 rounded-tl-none border border-slate-700\"\r\n                                    )}>\r\n                                        {msg.content}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {isLoading && (\r\n                                <div className=\"flex gap-3\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center shrink-0\">\r\n                                        <Bot className=\"w-4 h-4 text-violet-400\" />\r\n                                    </div>\r\n                                    <div className=\"bg-slate-800 border border-slate-700 p-3 rounded-2xl rounded-tl-none text-slate-400 text-xs flex items-center gap-1\">\r\n                                        <span className=\"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></span>\r\n                                        <span className=\"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></span>\r\n                                        <span className=\"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></span>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <div ref={messagesEndRef} />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Input */}\r\n                <div className=\"p-4 border-t border-slate-800 bg-slate-900\">\r\n                    <form onSubmit={(e) => { e.preventDefault(); handleSubmit(); }} className=\"relative\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={input}\r\n                            onChange={(e) => setInput(e.target.value)}\r\n                            placeholder={`Pergunte sobre ${context.title.toLowerCase()}...`}\r\n                            className=\"w-full bg-slate-950 border border-slate-800 text-slate-200 text-sm rounded-xl pl-4 pr-12 py-3.5 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500 placeholder-slate-600 transition-all shadow-inner\"\r\n                            disabled={isLoading}\r\n                        />\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={!input.trim() || isLoading}\r\n                            className=\"absolute right-2 top-2 p-1.5 text-violet-500 hover:text-white bg-violet-500/10 hover:bg-violet-600 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        >\r\n                            <Send className=\"w-4 h-4\" />\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2673, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/useGlobalSearch.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAppStore } from './store';\r\n\r\nexport interface SearchResult {\r\n    type: 'client' | 'task' | 'transaction' | 'action';\r\n    id: string | number;\r\n    title: string;\r\n    subtitle?: string;\r\n    icon: string;\r\n    url?: string;\r\n    score: number;\r\n    action?: () => void;\r\n}\r\n\r\nexport function useGlobalSearch() {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [query, setQuery] = useState('');\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const { clients, tasks, transactions } = useAppStore();\r\n    const router = useRouter();\r\n\r\n    // Keyboard shortcut: Cmd+K or Ctrl+K\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            // Open search\r\n            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\r\n                e.preventDefault();\r\n                setIsOpen(true);\r\n                setQuery('');\r\n                setSelectedIndex(0);\r\n            }\r\n\r\n            // Close search\r\n            if (e.key === 'Escape' && isOpen) {\r\n                setIsOpen(false);\r\n                setQuery('');\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [isOpen]);\r\n\r\n    // Calculate score for fuzzy matching\r\n    const calculateScore = useCallback((text: string, searchQuery: string): number => {\r\n        if (!text || !searchQuery) return 0;\r\n\r\n        const lowerText = text.toLowerCase();\r\n        const lowerQuery = searchQuery.toLowerCase();\r\n\r\n        // Exact match\r\n        if (lowerText === lowerQuery) return 100;\r\n\r\n        // Starts with\r\n        if (lowerText.startsWith(lowerQuery)) return 80;\r\n\r\n        // Contains\r\n        if (lowerText.includes(lowerQuery)) return 50;\r\n\r\n        // Fuzzy match (each letter appears in order)\r\n        let textIndex = 0;\r\n        let queryIndex = 0;\r\n        while (textIndex < lowerText.length && queryIndex < lowerQuery.length) {\r\n            if (lowerText[textIndex] === lowerQuery[queryIndex]) {\r\n                queryIndex++;\r\n            }\r\n            textIndex++;\r\n        }\r\n        if (queryIndex === lowerQuery.length) return 30;\r\n\r\n        return 0;\r\n    }, []);\r\n\r\n    // Search in all data\r\n    const results = useMemo(() => {\r\n        if (!query.trim()) {\r\n            // Show quick actions when empty\r\n            return [\r\n                {\r\n                    type: 'action' as const,\r\n                    id: 'new-client',\r\n                    title: 'Novo Cliente',\r\n                    subtitle: 'Criar novo cliente',\r\n                    icon: 'üë•',\r\n                    score: 100,\r\n                    action: () => {\r\n                        setIsOpen(false);\r\n                        // TODO: Open new client modal\r\n                        router.push('/clients');\r\n                    }\r\n                },\r\n                {\r\n                    type: 'action' as const,\r\n                    id: 'new-task',\r\n                    title: 'Nova Task',\r\n                    subtitle: 'Criar nova task',\r\n                    icon: '‚úÖ',\r\n                    score: 99,\r\n                    action: () => {\r\n                        setIsOpen(false);\r\n                        router.push('/production');\r\n                    }\r\n                },\r\n                {\r\n                    type: 'action' as const,\r\n                    id: 'new-transaction',\r\n                    title: 'Nova Transa√ß√£o',\r\n                    subtitle: 'Adicionar receita ou despesa',\r\n                    icon: 'üí∞',\r\n                    score: 98,\r\n                    action: () => {\r\n                        setIsOpen(false);\r\n                        router.push('/financial');\r\n                    }\r\n                }\r\n            ];\r\n        }\r\n\r\n        const allResults: SearchResult[] = [];\r\n\r\n        // Search clients\r\n        clients.forEach(client => {\r\n            const nameScore = calculateScore(client.company_name || '', query);\r\n            const respScore = calculateScore(client.responsible_name || '', query);\r\n            const score = Math.max(nameScore, respScore);\r\n\r\n            if (score > 0) {\r\n                allResults.push({\r\n                    type: 'client',\r\n                    id: client.id,\r\n                    title: client.company_name || 'Sem nome',\r\n                    subtitle: client.responsible_name || '',\r\n                    icon: 'üë•',\r\n                    url: `/clients?id=${client.id}`,\r\n                    score\r\n                });\r\n            }\r\n        });\r\n\r\n        // Search tasks\r\n        tasks.forEach(task => {\r\n            const titleScore = calculateScore(task.title || '', query);\r\n            const descScore = calculateScore(task.description || '', query);\r\n            const score = Math.max(titleScore, descScore);\r\n\r\n            if (score > 0) {\r\n                allResults.push({\r\n                    type: 'task',\r\n                    id: task.id,\r\n                    title: task.title || 'Sem t√≠tulo',\r\n                    subtitle: task.client_name || '',\r\n                    icon: '‚úÖ',\r\n                    url: `/production?id=${task.id}`,\r\n                    score\r\n                });\r\n            }\r\n        });\r\n\r\n        // Search transactions\r\n        transactions.forEach(transaction => {\r\n            const descScore = calculateScore(transaction.description || '', query);\r\n            const amountStr = transaction.amount?.toString() || '';\r\n            const amountScore = calculateScore(amountStr, query);\r\n            const score = Math.max(descScore, amountScore);\r\n\r\n            if (score > 0) {\r\n                allResults.push({\r\n                    type: 'transaction',\r\n                    id: transaction.id,\r\n                    title: transaction.description || 'Sem descri√ß√£o',\r\n                    subtitle: `R$ ${transaction.amount?.toFixed(2)} - ${transaction.type}`,\r\n                    icon: 'üí∞',\r\n                    url: `/financial`,\r\n                    score\r\n                });\r\n            }\r\n        });\r\n\r\n        // Sort by score (highest first)\r\n        return allResults.sort((a, b) => b.score - a.score).slice(0, 20); // Limit to 20 results\r\n    }, [query, clients, tasks, transactions, calculateScore, router]);\r\n\r\n    // Group results by type\r\n    const groupedResults = useMemo(() => {\r\n        const groups: Record<string, SearchResult[]> = {\r\n            clients: [],\r\n            tasks: [],\r\n            transactions: [],\r\n            actions: []\r\n        };\r\n\r\n        results.forEach(result => {\r\n            groups[result.type === 'client' ? 'clients' :\r\n                result.type === 'task' ? 'tasks' :\r\n                    result.type === 'transaction' ? 'transactions' : 'actions'].push(result);\r\n        });\r\n\r\n        return groups;\r\n    }, [results]);\r\n\r\n    // Navigate to selected result\r\n    const selectResult = useCallback((result: SearchResult) => {\r\n        if (result.action) {\r\n            result.action();\r\n        } else if (result.url) {\r\n            router.push(result.url);\r\n            setIsOpen(false);\r\n            setQuery('');\r\n        }\r\n    }, [router]);\r\n\r\n    // Keyboard navigation\r\n    const handleKeyDown = useCallback((e: KeyboardEvent) => {\r\n        if (!isOpen) return;\r\n\r\n        if (e.key === 'ArrowDown') {\r\n            e.preventDefault();\r\n            setSelectedIndex(prev => Math.min(prev + 1, results.length - 1));\r\n        } else if (e.key === 'ArrowUp') {\r\n            e.preventDefault();\r\n            setSelectedIndex(prev => Math.max(prev - 1, 0));\r\n        } else if (e.key === 'Enter' && results[selectedIndex]) {\r\n            e.preventDefault();\r\n            selectResult(results[selectedIndex]);\r\n        }\r\n    }, [isOpen, results, selectedIndex, selectResult]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [handleKeyDown]);\r\n\r\n    // Reset selected index when query changes\r\n    useEffect(() => {\r\n        setSelectedIndex(0);\r\n    }, [query]);\r\n\r\n    return {\r\n        isOpen,\r\n        setIsOpen,\r\n        query,\r\n        setQuery,\r\n        results,\r\n        groupedResults,\r\n        selectedIndex,\r\n        selectResult\r\n    };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2967, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/GlobalSearch.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useRef } from 'react';\r\nimport { X, Search } from 'lucide-react';\r\nimport { useGlobalSearch } from '@/lib/useGlobalSearch';\r\nimport { clsx } from 'clsx';\r\n\r\nexport function GlobalSearch() {\r\n    const {\r\n        isOpen,\r\n        setIsOpen,\r\n        query,\r\n        setQuery,\r\n        results,\r\n        groupedResults,\r\n        selectedIndex,\r\n        selectResult\r\n    } = useGlobalSearch();\r\n\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Auto-focus input when modal opens\r\n    useEffect(() => {\r\n        if (isOpen && inputRef.current) {\r\n            inputRef.current.focus();\r\n        }\r\n    }, [isOpen]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const groupLabels: Record<string, { title: string; icon: string }> = {\r\n        clients: { title: 'Clientes', icon: 'üë•' },\r\n        tasks: { title: 'Tasks', icon: '‚úÖ' },\r\n        transactions: { title: 'Transa√ß√µes', icon: 'üí∞' },\r\n        actions: { title: 'A√ß√µes R√°pidas', icon: '‚ö°' }\r\n    };\r\n\r\n    let currentIndex = 0;\r\n\r\n    return (\r\n        <>\r\n            {/* Backdrop */}\r\n            <div\r\n                className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100]\"\r\n                onClick={() => setIsOpen(false)}\r\n            />\r\n\r\n            {/* Modal */}\r\n            <div className=\"fixed top-[20%] left-1/2 -translate-x-1/2 w-full max-w-2xl z-[101] px-4\">\r\n                <div className=\"bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-4 duration-200\">\r\n                    {/* Search Input */}\r\n                    <div className=\"flex items-center gap-3 px-4 py-4 border-b border-slate-800\">\r\n                        <Search className=\"w-5 h-5 text-slate-500 shrink-0\" />\r\n                        <input\r\n                            ref={inputRef}\r\n                            type=\"text\"\r\n                            value={query}\r\n                            onChange={(e) => setQuery(e.target.value)}\r\n                            placeholder=\"Buscar clientes, tasks, transa√ß√µes...\"\r\n                            className=\"flex-1 bg-transparent text-white text-lg placeholder-slate-500 outline-none\"\r\n                        />\r\n                        <button\r\n                            onClick={() => setIsOpen(false)}\r\n                            className=\"p-1 text-slate-500 hover:text-white transition-colors\"\r\n                        >\r\n                            <X className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Results */}\r\n                    <div className=\"max-h-[500px] overflow-y-auto scrollbar-thin scrollbar-thumb-slate-800 scrollbar-track-transparent\">\r\n                        {results.length === 0 ? (\r\n                            <div className=\"px-4 py-12 text-center text-slate-500\">\r\n                                {query ? 'Nenhum resultado encontrado' : 'Digite para buscar...'}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-2\">\r\n                                {Object.entries(groupedResults).map(([groupKey, groupResults]) => {\r\n                                    if (groupResults.length === 0) return null;\r\n\r\n                                    const group = groupLabels[groupKey];\r\n\r\n                                    return (\r\n                                        <div key={groupKey} className=\"mb-4 last:mb-0\">\r\n                                            {/* Group Header */}\r\n                                            <div className=\"px-3 py-2 text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                                <span>{group.icon}</span>\r\n                                                <span>{group.title}</span>\r\n                                                <span className=\"text-slate-700\">({groupResults.length})</span>\r\n                                            </div>\r\n\r\n                                            {/* Group Items */}\r\n                                            <div className=\"space-y-1\">\r\n                                                {groupResults.map((result) => {\r\n                                                    const itemIndex = currentIndex++;\r\n                                                    const isSelected = itemIndex === selectedIndex;\r\n\r\n                                                    return (\r\n                                                        <button\r\n                                                            key={`${result.type}-${result.id}`}\r\n                                                            onClick={() => selectResult(result)}\r\n                                                            className={clsx(\r\n                                                                \"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-all\",\r\n                                                                isSelected\r\n                                                                    ? \"bg-violet-600 text-white\"\r\n                                                                    : \"hover:bg-slate-800 text-slate-300\"\r\n                                                            )}\r\n                                                        >\r\n                                                            <span className=\"text-2xl shrink-0\">{result.icon}</span>\r\n                                                            <div className=\"flex-1 min-w-0\">\r\n                                                                <p className={clsx(\r\n                                                                    \"text-sm font-medium truncate\",\r\n                                                                    isSelected ? \"text-white\" : \"text-slate-200\"\r\n                                                                )}>\r\n                                                                    {result.title}\r\n                                                                </p>\r\n                                                                {result.subtitle && (\r\n                                                                    <p className={clsx(\r\n                                                                        \"text-xs truncate\",\r\n                                                                        isSelected ? \"text-violet-200\" : \"text-slate-500\"\r\n                                                                    )}>\r\n                                                                        {result.subtitle}\r\n                                                                    </p>\r\n                                                                )}\r\n                                                            </div>\r\n                                                            {isSelected && (\r\n                                                                <span className=\"text-xs text-violet-200 shrink-0\">Enter ‚Üµ</span>\r\n                                                            )}\r\n                                                        </button>\r\n                                                    );\r\n                                                })}\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Footer Hint */}\r\n                    <div className=\"px-4 py-3 border-t border-slate-800 flex items-center justify-between text-xs text-slate-500\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <span>‚Üë‚Üì Navegar</span>\r\n                            <span>Enter Abrir</span>\r\n                            <span>ESC Fechar</span>\r\n                        </div>\r\n                        <span className=\"hidden sm:block\">Cmd+K para buscar</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3283, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/IOSInstallPrompt.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { X, Share, Plus, Square } from 'lucide-react';\r\n\r\nexport function IOSInstallPrompt() {\r\n    const [showPrompt, setShowPrompt] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Detect iOS\r\n        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(window as any).MSStream;\r\n\r\n        // Detect if already installed (standalone mode)\r\n        const isStandalone = window.matchMedia('(display-mode: standalone)').matches ||\r\n            (window.navigator as any).standalone;\r\n\r\n        // Check if user dismissed it before\r\n        const wasDismissed = localStorage.getItem('ios-install-dismissed');\r\n\r\n        // Show prompt if: iOS + Safari + not standalone + not dismissed\r\n        if (isIOS && !isStandalone && !wasDismissed) {\r\n            // Wait 2 seconds before showing\r\n            const timer = setTimeout(() => {\r\n                setShowPrompt(true);\r\n            }, 2000);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, []);\r\n\r\n    const handleDismiss = () => {\r\n        setShowPrompt(false);\r\n        localStorage.setItem('ios-install-dismissed', 'true');\r\n    };\r\n\r\n    const handleNeverShow = () => {\r\n        setShowPrompt(false);\r\n        localStorage.setItem('ios-install-dismissed', 'permanent');\r\n    };\r\n\r\n    if (!showPrompt) return null;\r\n\r\n    return (\r\n        <div className=\"fixed bottom-0 left-0 right-0 z-50 animate-in slide-in-from-bottom duration-300\">\r\n            {/* Overlay */}\r\n            <div\r\n                className=\"fixed inset-0 bg-black/60 backdrop-blur-sm\"\r\n                onClick={handleDismiss}\r\n            />\r\n\r\n            {/* Prompt Card */}\r\n            <div className=\"relative bg-gradient-to-br from-slate-900 to-slate-800 border-t border-violet-600/30 shadow-2xl\">\r\n                <div className=\"max-w-2xl mx-auto p-6\">\r\n                    {/* Close Button */}\r\n                    <button\r\n                        onClick={handleDismiss}\r\n                        className=\"absolute top-4 right-4 p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors\"\r\n                    >\r\n                        <X size={20} />\r\n                    </button>\r\n\r\n                    {/* Icon */}\r\n                    <div className=\"flex items-start gap-4\">\r\n                        <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-violet-600 to-violet-700 flex items-center justify-center flex-shrink-0 shadow-lg\">\r\n                            <span className=\"text-2xl font-bold text-white\">OPS</span>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1\">\r\n                            {/* Title */}\r\n                            <h3 className=\"text-lg font-bold text-white mb-1\">\r\n                                Instalar OPS Operation\r\n                            </h3>\r\n                            <p className=\"text-sm text-slate-300 mb-4\">\r\n                                Adicione √† tela inicial para acesso r√°pido como um app\r\n                            </p>\r\n\r\n                            {/* Instructions */}\r\n                            <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-700 mb-4\">\r\n                                <div className=\"space-y-3\">\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div className=\"w-8 h-8 rounded-full bg-violet-600/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                                            <span className=\"text-violet-400 font-bold text-sm\">1</span>\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"text-sm text-slate-200\">\r\n                                                Toque no bot√£o <strong className=\"text-white\">Compartilhar</strong>\r\n                                            </p>\r\n                                            <div className=\"flex items-center gap-2 mt-1 text-blue-400\">\r\n                                                <Share size={18} strokeWidth={2.5} />\r\n                                                <span className=\"text-xs\">(na barra inferior)</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div className=\"w-8 h-8 rounded-full bg-violet-600/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                                            <span className=\"text-violet-400 font-bold text-sm\">2</span>\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"text-sm text-slate-200\">\r\n                                                Selecione <strong className=\"text-white\">\"Adicionar √† Tela de In√≠cio\"</strong>\r\n                                            </p>\r\n                                            <div className=\"flex items-center gap-2 mt-1 text-slate-400\">\r\n                                                <Plus size={18} strokeWidth={2.5} />\r\n                                                <Square size={14} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div className=\"w-8 h-8 rounded-full bg-violet-600/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                                            <span className=\"text-violet-400 font-bold text-sm\">3</span>\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"text-sm text-slate-200\">\r\n                                                Confirme clicando em <strong className=\"text-white\">\"Adicionar\"</strong>\r\n                                            </p>\r\n                                            <p className=\"text-xs text-green-400 mt-1\">‚úì Pronto! √çcone aparecer√° na tela inicial</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Actions */}\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={handleDismiss}\r\n                                    className=\"flex-1 px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-white font-medium rounded-lg transition-colors text-sm\"\r\n                                >\r\n                                    Agora n√£o\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleNeverShow}\r\n                                    className=\"px-4 py-2.5 text-slate-400 hover:text-white font-medium rounded-lg transition-colors text-sm\"\r\n                                >\r\n                                    N√£o mostrar novamente\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3694, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/notifications/push.ts"],"sourcesContent":["// Push Notifications Library for OPS Operation\r\n\r\nexport type NotificationPermissionStatus = 'default' | 'granted' | 'denied';\r\n\r\n/**\r\n * Check if browser supports notifications\r\n */\r\nexport function isNotificationSupported(): boolean {\r\n    return 'Notification' in window && 'serviceWorker' in navigator;\r\n}\r\n\r\n/**\r\n * Get current notification permission status\r\n */\r\nexport function getPermissionStatus(): NotificationPermissionStatus {\r\n    if (!isNotificationSupported()) {\r\n        return 'denied';\r\n    }\r\n    return Notification.permission;\r\n}\r\n\r\n/**\r\n * Request notification permission from user\r\n */\r\nexport async function requestNotificationPermission(): Promise<boolean> {\r\n    if (!isNotificationSupported()) {\r\n        console.warn('[Push] Notifications not supported');\r\n        return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n        return true;\r\n    }\r\n\r\n    try {\r\n        const permission = await Notification.requestPermission();\r\n        console.log('[Push] Permission result:', permission);\r\n        return permission === 'granted';\r\n    } catch (error) {\r\n        console.error('[Push] Error requesting permission:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Subscribe to push notifications\r\n */\r\nexport async function subscribeToPush(): Promise<PushSubscription | null> {\r\n    if (!isNotificationSupported()) {\r\n        return null;\r\n    }\r\n\r\n    try {\r\n        const registration = await navigator.serviceWorker.ready;\r\n\r\n        // Check if already subscribed\r\n        let subscription = await registration.pushManager.getSubscription();\r\n\r\n        if (subscription) {\r\n            console.log('[Push] Already subscribed');\r\n            return subscription;\r\n        }\r\n\r\n        // Subscribe (userVisibleOnly is required)\r\n        subscription = await registration.pushManager.subscribe({\r\n            userVisibleOnly: true\r\n        });\r\n\r\n        console.log('[Push] New subscription created');\r\n\r\n        // Save subscription to localStorage\r\n        localStorage.setItem('push_subscription', JSON.stringify(subscription.toJSON()));\r\n\r\n        return subscription;\r\n    } catch (error) {\r\n        console.error('[Push] Error subscribing:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Get current push subscription\r\n */\r\nexport async function getSubscription(): Promise<PushSubscription | null> {\r\n    if (!isNotificationSupported()) {\r\n        return null;\r\n    }\r\n\r\n    try {\r\n        const registration = await navigator.serviceWorker.ready;\r\n        return await registration.pushManager.getSubscription();\r\n    } catch (error) {\r\n        console.error('[Push] Error getting subscription:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Unsubscribe from push notifications\r\n */\r\nexport async function unsubscribeFromPush(): Promise<boolean> {\r\n    try {\r\n        const subscription = await getSubscription();\r\n        if (subscription) {\r\n            await subscription.unsubscribe();\r\n            localStorage.removeItem('push_subscription');\r\n            console.log('[Push] Unsubscribed successfully');\r\n            return true;\r\n        }\r\n        return false;\r\n    } catch (error) {\r\n        console.error('[Push] Error unsubscribing:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Send a local push notification (via Service Worker)\r\n * This doesn't require a backend server\r\n */\r\nexport async function sendLocalPushNotification(\r\n    title: string,\r\n    message: string,\r\n    url?: string\r\n): Promise<boolean> {\r\n    if (!isNotificationSupported()) {\r\n        console.warn('[Push] Notifications not supported');\r\n        return false;\r\n    }\r\n\r\n    if (Notification.permission !== 'granted') {\r\n        console.warn('[Push] Permission not granted');\r\n        return false;\r\n    }\r\n\r\n    try {\r\n        const registration = await navigator.serviceWorker.ready;\r\n\r\n        await registration.showNotification(title, {\r\n            body: message,\r\n            icon: '/icons/icon-192.png',\r\n            badge: '/icons/icon-192.png',\r\n            vibrate: [200, 100, 200],\r\n            data: {\r\n                url: url || '/'\r\n            },\r\n            actions: [\r\n                { action: 'open', title: 'Abrir' },\r\n                { action: 'close', title: 'Fechar' }\r\n            ],\r\n            tag: 'ops-local-' + Date.now(),\r\n            requireInteraction: false\r\n        } as any);\r\n\r\n        console.log('[Push] Local notification sent:', title);\r\n        return true;\r\n    } catch (error) {\r\n        console.error('[Push] Error sending local notification:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Send a test notification\r\n */\r\nexport async function sendTestNotification(): Promise<boolean> {\r\n    return sendLocalPushNotification(\r\n        'üéâ Notifica√ß√µes Ativadas!',\r\n        'Voc√™ receber√° alertas das automa√ß√µes aqui.',\r\n        '/'\r\n    );\r\n}\r\n\r\n/**\r\n * Initialize push notifications\r\n * Call this on app start\r\n */\r\nexport async function initializePushNotifications(): Promise<{\r\n    supported: boolean;\r\n    permission: NotificationPermissionStatus;\r\n    subscribed: boolean;\r\n}> {\r\n    const supported = isNotificationSupported();\r\n    const permission = getPermissionStatus();\r\n    const subscription = await getSubscription();\r\n\r\n    return {\r\n        supported,\r\n        permission,\r\n        subscribed: !!subscription\r\n    };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3856, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/PushNotificationPrompt.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { Bell, X, Check } from 'lucide-react';\r\nimport {\r\n    isNotificationSupported,\r\n    getPermissionStatus,\r\n    requestNotificationPermission,\r\n    subscribeToPush,\r\n    sendTestNotification\r\n} from '@/lib/notifications/push';\r\n\r\nexport function PushNotificationPrompt() {\r\n    const [permission, setPermission] = useState<NotificationPermission>('default');\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [isSupported, setIsSupported] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // Check support and permission on mount\r\n        const supported = isNotificationSupported();\r\n        setIsSupported(supported);\r\n\r\n        if (!supported) {\r\n            return;\r\n        }\r\n\r\n        const currentPermission = getPermissionStatus();\r\n        setPermission(currentPermission);\r\n\r\n        // Show prompt if permission not decided yet\r\n        const dismissed = localStorage.getItem('push_prompt_dismissed');\r\n        if (currentPermission === 'default' && !dismissed) {\r\n            // Wait 3 seconds before showing\r\n            const timer = setTimeout(() => {\r\n                setIsVisible(true);\r\n            }, 3000);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, []);\r\n\r\n    const handleAllow = async () => {\r\n        const granted = await requestNotificationPermission();\r\n\r\n        if (granted) {\r\n            setPermission('granted');\r\n\r\n            // Subscribe to push\r\n            await subscribeToPush();\r\n\r\n            // Send test notification\r\n            await sendTestNotification();\r\n\r\n            // Hide prompt\r\n            setIsVisible(false);\r\n        } else {\r\n            setPermission('denied');\r\n            setIsVisible(false);\r\n        }\r\n    };\r\n\r\n    const handleDismiss = () => {\r\n        setIsVisible(false);\r\n        localStorage.setItem('push_prompt_dismissed', 'true');\r\n    };\r\n\r\n    const handleNeverShow = () => {\r\n        setIsVisible(false);\r\n        localStorage.setItem('push_prompt_dismissed', 'permanent');\r\n    };\r\n\r\n    // Don't show if not supported, already decided, or dismissed\r\n    if (!isSupported || !isVisible || permission !== 'default') {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed bottom-4 right-4 z-50 animate-in slide-in-from-bottom duration-300\">\r\n            <div className=\"bg-slate-900 rounded-xl border border-violet-600/50 shadow-2xl max-w-sm p-5 relative\">\r\n                {/* Close button */}\r\n                <button\r\n                    onClick={handleDismiss}\r\n                    className=\"absolute top-3 right-3 text-slate-400 hover:text-white transition-colors\"\r\n                >\r\n                    <X size={18} />\r\n                </button>\r\n\r\n                {/* Icon */}\r\n                <div className=\"flex items-start gap-4 mb-4\">\r\n                    <div className=\"w-12 h-12 rounded-full bg-violet-600/20 flex items-center justify-center flex-shrink-0\">\r\n                        <Bell className=\"text-violet-400\" size={24} />\r\n                    </div>\r\n\r\n                    <div className=\"flex-1\">\r\n                        <h3 className=\"font-bold text-white mb-1\">Ativar Notifica√ß√µes?</h3>\r\n                        <p className=\"text-sm text-slate-400\">\r\n                            Receba alertas das automa√ß√µes no celular, mesmo com o app fechado\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Benefits */}\r\n                <div className=\"space-y-2 mb-4 ml-16\">\r\n                    <div className=\"flex items-center gap-2 text-sm text-slate-300\">\r\n                        <Check size={16} className=\"text-green-400\" />\r\n                        <span>Alertas de tasks atrasadas</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-sm text-slate-300\">\r\n                        <Check size={16} className=\"text-green-400\" />\r\n                        <span>Follow-ups autom√°ticos</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-sm text-slate-300\">\r\n                        <Check size={16} className=\"text-green-400\" />\r\n                        <span>Funciona no celular</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex flex-col gap-2\">\r\n                    <button\r\n                        onClick={handleAllow}\r\n                        className=\"w-full px-4 py-2.5 bg-violet-600 hover:bg-violet-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2\"\r\n                    >\r\n                        <Bell size={18} />\r\n                        Permitir Notifica√ß√µes\r\n                    </button>\r\n\r\n                    <div className=\"flex gap-2\">\r\n                        <button\r\n                            onClick={handleDismiss}\r\n                            className=\"flex-1 px-3 py-2 text-sm text-slate-400 hover:text-white transition-colors\"\r\n                        >\r\n                            Agora n√£o\r\n                        </button>\r\n                        <button\r\n                            onClick={handleNeverShow}\r\n                            className=\"flex-1 px-3 py-2 text-sm text-slate-400 hover:text-white transition-colors\"\r\n                        >\r\n                            N√£o mostrar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AACA;;;AAHA;;;;AAWO,SAAS;;IACZ,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAyB;IACrE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAA,0KAAS;4CAAC;YACN,wCAAwC;YACxC,MAAM,YAAY,IAAA,0JAAuB;YACzC,eAAe;YAEf,IAAI,CAAC,WAAW;gBACZ;YACJ;YAEA,MAAM,oBAAoB,IAAA,sJAAmB;YAC7C,cAAc;YAEd,4CAA4C;YAC5C,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,IAAI,sBAAsB,aAAa,CAAC,WAAW;gBAC/C,gCAAgC;gBAChC,MAAM,QAAQ;8DAAW;wBACrB,aAAa;oBACjB;6DAAG;gBAEH;wDAAO,IAAM,aAAa;;YAC9B;QACJ;2CAAG,EAAE;IAEL,MAAM,cAAc;QAChB,MAAM,UAAU,MAAM,IAAA,gKAA6B;QAEnD,IAAI,SAAS;YACT,cAAc;YAEd,oBAAoB;YACpB,MAAM,IAAA,kJAAe;YAErB,yBAAyB;YACzB,MAAM,IAAA,uJAAoB;YAE1B,cAAc;YACd,aAAa;QACjB,OAAO;YACH,cAAc;YACd,aAAa;QACjB;IACJ;IAEA,MAAM,gBAAgB;QAClB,aAAa;QACb,aAAa,OAAO,CAAC,yBAAyB;IAClD;IAEA,MAAM,kBAAkB;QACpB,aAAa;QACb,aAAa,OAAO,CAAC,yBAAyB;IAClD;IAEA,6DAA6D;IAC7D,IAAI,CAAC,eAAe,CAAC,aAAa,eAAe,WAAW;QACxD,OAAO;IACX;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBACG,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,oMAAC;wBAAC,MAAM;;;;;;;;;;;8BAIb,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,6MAAI;gCAAC,WAAU;gCAAkB,MAAM;;;;;;;;;;;sCAG5C,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CAA4B;;;;;;8CAC1C,6LAAC;oCAAE,WAAU;8CAAyB;;;;;;;;;;;;;;;;;;8BAO9C,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,gNAAK;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAC3B,6LAAC;8CAAK;;;;;;;;;;;;sCAEV,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,gNAAK;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAC3B,6LAAC;8CAAK;;;;;;;;;;;;sCAEV,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,gNAAK;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAC3B,6LAAC;8CAAK;;;;;;;;;;;;;;;;;;8BAKd,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BACG,SAAS;4BACT,WAAU;;8CAEV,6LAAC,6MAAI;oCAAC,MAAM;;;;;;gCAAM;;;;;;;sCAItB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCACG,SAAS;oCACT,WAAU;8CACb;;;;;;8CAGD,6LAAC;oCACG,SAAS;oCACT,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQzB;GArIgB;KAAA"}},
    {"offset": {"line": 4156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/automations/conditions.ts"],"sourcesContent":["import { Condition, OperatorType, ExecutionContext } from './types';\r\n\r\n/**\r\n * Evaluate a single condition against a data object\r\n */\r\nexport function evaluateCondition(\r\n    condition: Condition,\r\n    data: any,\r\n    context: ExecutionContext\r\n): boolean {\r\n    const { field, operator, value, unit } = condition;\r\n\r\n    // Get field value from data\r\n    const fieldValue = getNestedValue(data, field);\r\n\r\n    if (fieldValue === undefined) {\r\n        return false;\r\n    }\r\n\r\n    switch (operator) {\r\n        case 'equals':\r\n            return fieldValue === value;\r\n\r\n        case 'notEquals':\r\n            return fieldValue !== value;\r\n\r\n        case 'greaterThan':\r\n            return Number(fieldValue) > Number(value);\r\n\r\n        case 'lessThan':\r\n            return Number(fieldValue) < Number(value);\r\n\r\n        case 'contains':\r\n            return String(fieldValue).toLowerCase().includes(String(value).toLowerCase());\r\n\r\n        case 'olderThan':\r\n            return isOlderThan(fieldValue, value, unit || 'days');\r\n\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Evaluate all conditions (AND logic)\r\n */\r\nexport function evaluateConditions(\r\n    conditions: Condition[] | undefined,\r\n    data: any,\r\n    context: ExecutionContext\r\n): boolean {\r\n    if (!conditions || conditions.length === 0) {\r\n        return true; // No conditions = always true\r\n    }\r\n\r\n    return conditions.every(condition =>\r\n        evaluateCondition(condition, data, context)\r\n    );\r\n}\r\n\r\n/**\r\n * Get nested value from object using dot notation\r\n * Example: getNestedValue(obj, 'client.name')\r\n */\r\nfunction getNestedValue(obj: any, path: string): any {\r\n    return path.split('.').reduce((current, key) => current?.[key], obj);\r\n}\r\n\r\n/**\r\n * Check if a date is older than X units\r\n */\r\nfunction isOlderThan(dateValue: any, amount: number, unit: 'days' | 'hours' | 'minutes'): boolean {\r\n    const date = new Date(dateValue);\r\n    if (isNaN(date.getTime())) {\r\n        return false;\r\n    }\r\n\r\n    const now = new Date();\r\n    const diff = now.getTime() - date.getTime();\r\n\r\n    let threshold = 0;\r\n    switch (unit) {\r\n        case 'days':\r\n            threshold = amount * 24 * 60 * 60 * 1000;\r\n            break;\r\n        case 'hours':\r\n            threshold = amount * 60 * 60 * 1000;\r\n            break;\r\n        case 'minutes':\r\n            threshold = amount * 60 * 1000;\r\n            break;\r\n    }\r\n\r\n    return diff > threshold;\r\n}\r\n\r\n/**\r\n * Replace template variables in string\r\n * Example: \"Task: {task.title}\" -> \"Task: Design Logo\"\r\n */\r\nexport function replaceVariables(template: string, data: any): string {\r\n    return template.replace(/\\{([^}]+)\\}/g, (match, path) => {\r\n        const value = getNestedValue(data, path);\r\n        return value !== undefined ? String(value) : match;\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAKO,SAAS,kBACZ,SAAoB,EACpB,IAAS,EACT,OAAyB;IAEzB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG;IAEzC,4BAA4B;IAC5B,MAAM,aAAa,eAAe,MAAM;IAExC,IAAI,eAAe,WAAW;QAC1B,OAAO;IACX;IAEA,OAAQ;QACJ,KAAK;YACD,OAAO,eAAe;QAE1B,KAAK;YACD,OAAO,eAAe;QAE1B,KAAK;YACD,OAAO,OAAO,cAAc,OAAO;QAEvC,KAAK;YACD,OAAO,OAAO,cAAc,OAAO;QAEvC,KAAK;YACD,OAAO,OAAO,YAAY,WAAW,GAAG,QAAQ,CAAC,OAAO,OAAO,WAAW;QAE9E,KAAK;YACD,OAAO,YAAY,YAAY,OAAO,QAAQ;QAElD;YACI,OAAO;IACf;AACJ;AAKO,SAAS,mBACZ,UAAmC,EACnC,IAAS,EACT,OAAyB;IAEzB,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;QACxC,OAAO,MAAM,8BAA8B;IAC/C;IAEA,OAAO,WAAW,KAAK,CAAC,CAAA,YACpB,kBAAkB,WAAW,MAAM;AAE3C;AAEA;;;CAGC,GACD,SAAS,eAAe,GAAQ,EAAE,IAAY;IAC1C,OAAO,KAAK,KAAK,CAAC,KAAK,MAAM,CAAC,CAAC,SAAS,MAAQ,SAAS,CAAC,IAAI,EAAE;AACpE;AAEA;;CAEC,GACD,SAAS,YAAY,SAAc,EAAE,MAAc,EAAE,IAAkC;IACnF,MAAM,OAAO,IAAI,KAAK;IACtB,IAAI,MAAM,KAAK,OAAO,KAAK;QACvB,OAAO;IACX;IAEA,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,IAAI,OAAO,KAAK,KAAK,OAAO;IAEzC,IAAI,YAAY;IAChB,OAAQ;QACJ,KAAK;YACD,YAAY,SAAS,KAAK,KAAK,KAAK;YACpC;QACJ,KAAK;YACD,YAAY,SAAS,KAAK,KAAK;YAC/B;QACJ,KAAK;YACD,YAAY,SAAS,KAAK;YAC1B;IACR;IAEA,OAAO,OAAO;AAClB;AAMO,SAAS,iBAAiB,QAAgB,EAAE,IAAS;IACxD,OAAO,SAAS,OAAO,CAAC,gBAAgB,CAAC,OAAO;QAC5C,MAAM,QAAQ,eAAe,MAAM;QACnC,OAAO,UAAU,YAAY,OAAO,SAAS;IACjD;AACJ"}},
    {"offset": {"line": 4236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/automations/actions.ts"],"sourcesContent":["import { Action, CreateTaskAction, NotifyAction, UpdateFieldAction, AISuggestAction, ExecutionContext } from './types';\r\nimport { replaceVariables } from './conditions';\r\nimport { sendLocalPushNotification, getPermissionStatus } from '@/lib/notifications/push';\r\n\r\n/**\r\n * Execute a single action\r\n */\r\nexport async function executeAction(\r\n    action: Action,\r\n    data: any,\r\n    context: ExecutionContext\r\n): Promise<{ success: boolean; result?: any; error?: string }> {\r\n    try {\r\n        switch (action.type) {\r\n            case 'createTask':\r\n                return await executeCreateTask(action, data, context);\r\n\r\n            case 'notify':\r\n                return await executeNotify(action, data, context);\r\n\r\n            case 'updateField':\r\n                return await executeUpdateField(action, data, context);\r\n\r\n            case 'aiSuggest':\r\n                return await executeAISuggest(action, data, context);\r\n\r\n            default:\r\n                return { success: false, error: 'Unknown action type' };\r\n        }\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Execute multiple actions sequentially\r\n */\r\nexport async function executeActions(\r\n    actions: Action[],\r\n    data: any,\r\n    context: ExecutionContext\r\n): Promise<{ success: boolean; results: any[]; errors: string[] }> {\r\n    const results: any[] = [];\r\n    const errors: string[] = [];\r\n\r\n    for (const action of actions) {\r\n        const result = await executeAction(action, data, context);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n            errors.push(result.error || 'Unknown error');\r\n        }\r\n    }\r\n\r\n    return {\r\n        success: errors.length === 0,\r\n        results,\r\n        errors\r\n    };\r\n}\r\n\r\n// ========== Action Implementations ==========\r\n\r\nasync function executeCreateTask(\r\n    action: CreateTaskAction,\r\n    data: any,\r\n    context: ExecutionContext\r\n): Promise<{ success: boolean; result?: any }> {\r\n    const { title, description, priority, stage } = action.data;\r\n\r\n    const newTask = {\r\n        id: Date.now(),\r\n        title: replaceVariables(title, data),\r\n        description: description ? replaceVariables(description, data) : '',\r\n        priority: priority || 'medium',\r\n        stage: stage || 'To Do',\r\n        status: 'pending',\r\n        createdAt: new Date(),\r\n        automated: true\r\n    };\r\n\r\n    // In real app, this would call the store or API\r\n    console.log('‚úÖ [Automation] Created task:', newTask);\r\n\r\n    return {\r\n        success: true,\r\n        result: newTask\r\n    };\r\n}\r\n\r\nasync function executeNotify(\r\n    action: NotifyAction,\r\n    data: any,\r\n    context: ExecutionContext\r\n): Promise<{ success: boolean; result?: any }> {\r\n    const message = replaceVariables(action.message, data);\r\n    const title = action.title ? replaceVariables(action.title, data) : 'Automa√ß√£o';\r\n\r\n    // 1. Create in-app notification\r\n    const notification = {\r\n        id: Date.now().toString(),\r\n        type: 'automation' as const,\r\n        title,\r\n        message,\r\n        timestamp: new Date(),\r\n        read: false\r\n    };\r\n\r\n    console.log('üîî [Automation] Notification:', notification);\r\n\r\n    // 2. Send push notification (NEW!)\r\n    const canPush = typeof window !== 'undefined' && getPermissionStatus() === 'granted';\r\n\r\n    if (canPush) {\r\n        try {\r\n            await sendLocalPushNotification(title, message, '/automations');\r\n            console.log('üì± [Automation] Push notification sent!');\r\n        } catch (error) {\r\n            console.error('‚ùå [Automation] Push notification failed:', error);\r\n        }\r\n    }\r\n\r\n    return {\r\n        success: true,\r\n        result: notification\r\n    };\r\n}\r\n\r\nasync function executeUpdateField(\r\n    action: UpdateFieldAction,\r\n    data: any,\r\n    context: ExecutionContext\r\n): Promise<{ success: boolean; result?: any }> {\r\n    const { entity, field, value } = action;\r\n\r\n    console.log(`üîÑ [Automation] Update ${entity}.${field} = ${value}`);\r\n\r\n    // In real app, this would update Supabase\r\n    return {\r\n        success: true,\r\n        result: { entity, field, value }\r\n    };\r\n}\r\n\r\nasync function executeAISuggest(\r\n    action: AISuggestAction,\r\n    data: any,\r\n    context: ExecutionContext\r\n): Promise<{ success: boolean; result?: any }> {\r\n    const { context: suggestionContext } = action;\r\n\r\n    console.log('üí° [Automation] AI Suggestion for context:', suggestionContext);\r\n\r\n    // In real app, this would call Gemini API\r\n    const suggestion = {\r\n        context: suggestionContext,\r\n        suggestion: 'AI suggestion would appear here',\r\n        confidence: 85\r\n    };\r\n\r\n    return {\r\n        success: true,\r\n        result: suggestion\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;AAKO,eAAe,cAClB,MAAc,EACd,IAAS,EACT,OAAyB;IAEzB,IAAI;QACA,OAAQ,OAAO,IAAI;YACf,KAAK;gBACD,OAAO,MAAM,kBAAkB,QAAQ,MAAM;YAEjD,KAAK;gBACD,OAAO,MAAM,cAAc,QAAQ,MAAM;YAE7C,KAAK;gBACD,OAAO,MAAM,mBAAmB,QAAQ,MAAM;YAElD,KAAK;gBACD,OAAO,MAAM,iBAAiB,QAAQ,MAAM;YAEhD;gBACI,OAAO;oBAAE,SAAS;oBAAO,OAAO;gBAAsB;QAC9D;IACJ,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC;IAClD;AACJ;AAKO,eAAe,eAClB,OAAiB,EACjB,IAAS,EACT,OAAyB;IAEzB,MAAM,UAAiB,EAAE;IACzB,MAAM,SAAmB,EAAE;IAE3B,KAAK,MAAM,UAAU,QAAS;QAC1B,MAAM,SAAS,MAAM,cAAc,QAAQ,MAAM;QACjD,QAAQ,IAAI,CAAC;QAEb,IAAI,CAAC,OAAO,OAAO,EAAE;YACjB,OAAO,IAAI,CAAC,OAAO,KAAK,IAAI;QAChC;IACJ;IAEA,OAAO;QACH,SAAS,OAAO,MAAM,KAAK;QAC3B;QACA;IACJ;AACJ;AAEA,+CAA+C;AAE/C,eAAe,kBACX,MAAwB,EACxB,IAAS,EACT,OAAyB;IAEzB,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,OAAO,IAAI;IAE3D,MAAM,UAAU;QACZ,IAAI,KAAK,GAAG;QACZ,OAAO,IAAA,uJAAgB,EAAC,OAAO;QAC/B,aAAa,cAAc,IAAA,uJAAgB,EAAC,aAAa,QAAQ;QACjE,UAAU,YAAY;QACtB,OAAO,SAAS;QAChB,QAAQ;QACR,WAAW,IAAI;QACf,WAAW;IACf;IAEA,gDAAgD;IAChD,QAAQ,GAAG,CAAC,gCAAgC;IAE5C,OAAO;QACH,SAAS;QACT,QAAQ;IACZ;AACJ;AAEA,eAAe,cACX,MAAoB,EACpB,IAAS,EACT,OAAyB;IAEzB,MAAM,UAAU,IAAA,uJAAgB,EAAC,OAAO,OAAO,EAAE;IACjD,MAAM,QAAQ,OAAO,KAAK,GAAG,IAAA,uJAAgB,EAAC,OAAO,KAAK,EAAE,QAAQ;IAEpE,gCAAgC;IAChC,MAAM,eAAe;QACjB,IAAI,KAAK,GAAG,GAAG,QAAQ;QACvB,MAAM;QACN;QACA;QACA,WAAW,IAAI;QACf,MAAM;IACV;IAEA,QAAQ,GAAG,CAAC,iCAAiC;IAE7C,mCAAmC;IACnC,MAAM,UAAU,+CAAkB,eAAe,IAAA,sJAAmB,QAAO;IAE3E,IAAI,SAAS;QACT,IAAI;YACA,MAAM,IAAA,4JAAyB,EAAC,OAAO,SAAS;YAChD,QAAQ,GAAG,CAAC;QAChB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,4CAA4C;QAC9D;IACJ;IAEA,OAAO;QACH,SAAS;QACT,QAAQ;IACZ;AACJ;AAEA,eAAe,mBACX,MAAyB,EACzB,IAAS,EACT,OAAyB;IAEzB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG;IAEjC,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,EAAE,OAAO;IAElE,0CAA0C;IAC1C,OAAO;QACH,SAAS;QACT,QAAQ;YAAE;YAAQ;YAAO;QAAM;IACnC;AACJ;AAEA,eAAe,iBACX,MAAuB,EACvB,IAAS,EACT,OAAyB;IAEzB,MAAM,EAAE,SAAS,iBAAiB,EAAE,GAAG;IAEvC,QAAQ,GAAG,CAAC,8CAA8C;IAE1D,0CAA0C;IAC1C,MAAM,aAAa;QACf,SAAS;QACT,YAAY;QACZ,YAAY;IAChB;IAEA,OAAO;QACH,SAAS;QACT,QAAQ;IACZ;AACJ"}},
    {"offset": {"line": 4368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/automations/engine.ts"],"sourcesContent":["import { Automation, ExecutionContext, AutomationLog } from './types';\r\nimport { evaluateConditions } from './conditions';\r\nimport { executeActions } from './actions';\r\n\r\n/**\r\n * Main Automation Engine\r\n * Runs automations and executes actions when conditions are met\r\n */\r\n\r\n/**\r\n * Run a single automation\r\n */\r\nexport async function runAutomation(\r\n    automation: Automation,\r\n    context: ExecutionContext\r\n): Promise<AutomationLog> {\r\n    const log: AutomationLog = {\r\n        id: Date.now().toString(),\r\n        automationId: automation.id,\r\n        executedAt: new Date(),\r\n        success: false\r\n    };\r\n\r\n    try {\r\n        console.log(`ü§ñ [Engine] Running automation: ${automation.name}`);\r\n\r\n        // Check if automation is enabled\r\n        if (!automation.enabled) {\r\n            log.error = 'Automation is disabled';\r\n            console.log('‚è∏Ô∏è  [Engine] Automation disabled, skipping');\r\n            return log;\r\n        }\r\n\r\n        // Get relevant data based on trigger\r\n        const dataToCheck = getDataForTrigger(automation, context);\r\n\r\n        // Process each item\r\n        let actionsExecuted = 0;\r\n\r\n        for (const item of dataToCheck) {\r\n            // Evaluate conditions\r\n            const conditionsMet = evaluateConditions(automation.conditions, item, context);\r\n\r\n            if (conditionsMet) {\r\n                console.log(`‚úÖ [Engine] Conditions met for:`, item);\r\n\r\n                // Execute actions\r\n                const result = await executeActions(automation.actions, item, context);\r\n\r\n                if (result.success) {\r\n                    actionsExecuted++;\r\n                } else {\r\n                    console.error('‚ùå [Engine] Action errors:', result.errors);\r\n                }\r\n            }\r\n        }\r\n\r\n        log.success = true;\r\n        log.result = {\r\n            itemsChecked: dataToCheck.length,\r\n            actionsExecuted\r\n        };\r\n\r\n        console.log(`‚úÖ [Engine] Automation completed: ${actionsExecuted} actions executed`);\r\n\r\n    } catch (error: any) {\r\n        log.error = error.message;\r\n        console.error('‚ùå [Engine] Automation error:', error);\r\n    }\r\n\r\n    return log;\r\n}\r\n\r\n/**\r\n * Run all enabled automations\r\n */\r\nexport async function runAllAutomations(\r\n    automations: Automation[],\r\n    context: ExecutionContext\r\n): Promise<AutomationLog[]> {\r\n    console.log(`üöÄ [Engine] Running ${automations.length} automations`);\r\n\r\n    const logs: AutomationLog[] = [];\r\n\r\n    for (const automation of automations) {\r\n        if (automation.enabled) {\r\n            const log = await runAutomation(automation, context);\r\n            logs.push(log);\r\n        }\r\n    }\r\n\r\n    console.log(`‚úÖ [Engine] All automations completed`);\r\n    return logs;\r\n}\r\n\r\n/**\r\n * Get data to check based on trigger type\r\n */\r\nfunction getDataForTrigger(automation: Automation, context: ExecutionContext): any[] {\r\n    const { trigger } = automation;\r\n\r\n    switch (trigger.type) {\r\n        case 'time':\r\n        case 'condition':\r\n            // Check all clients by default (can be customized)\r\n            return context.clients || [];\r\n\r\n        case 'event':\r\n            // For events, specific entity\r\n            switch (trigger.entity) {\r\n                case 'client':\r\n                    return context.clients || [];\r\n                case 'task':\r\n                    return context.tasks || [];\r\n                case 'transaction':\r\n                    return context.transactions || [];\r\n                default:\r\n                    return [];\r\n            }\r\n\r\n        default:\r\n            return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Check if automation should run based on trigger\r\n */\r\nexport function shouldRunAutomation(automation: Automation): boolean {\r\n    const { trigger } = automation;\r\n\r\n    // For now, we'll run all time-based triggers\r\n    // In production, check lastRun and interval\r\n    if (trigger.type === 'time') {\r\n        return true;\r\n    }\r\n\r\n    // Event-based triggers are handled separately\r\n    return false;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AACA;AACA;;;AAUO,eAAe,cAClB,UAAsB,EACtB,OAAyB;IAEzB,MAAM,MAAqB;QACvB,IAAI,KAAK,GAAG,GAAG,QAAQ;QACvB,cAAc,WAAW,EAAE;QAC3B,YAAY,IAAI;QAChB,SAAS;IACb;IAEA,IAAI;QACA,QAAQ,GAAG,CAAC,CAAC,gCAAgC,EAAE,WAAW,IAAI,EAAE;QAEhE,iCAAiC;QACjC,IAAI,CAAC,WAAW,OAAO,EAAE;YACrB,IAAI,KAAK,GAAG;YACZ,QAAQ,GAAG,CAAC;YACZ,OAAO;QACX;QAEA,qCAAqC;QACrC,MAAM,cAAc,kBAAkB,YAAY;QAElD,oBAAoB;QACpB,IAAI,kBAAkB;QAEtB,KAAK,MAAM,QAAQ,YAAa;YAC5B,sBAAsB;YACtB,MAAM,gBAAgB,IAAA,yJAAkB,EAAC,WAAW,UAAU,EAAE,MAAM;YAEtE,IAAI,eAAe;gBACf,QAAQ,GAAG,CAAC,CAAC,8BAA8B,CAAC,EAAE;gBAE9C,kBAAkB;gBAClB,MAAM,SAAS,MAAM,IAAA,kJAAc,EAAC,WAAW,OAAO,EAAE,MAAM;gBAE9D,IAAI,OAAO,OAAO,EAAE;oBAChB;gBACJ,OAAO;oBACH,QAAQ,KAAK,CAAC,6BAA6B,OAAO,MAAM;gBAC5D;YACJ;QACJ;QAEA,IAAI,OAAO,GAAG;QACd,IAAI,MAAM,GAAG;YACT,cAAc,YAAY,MAAM;YAChC;QACJ;QAEA,QAAQ,GAAG,CAAC,CAAC,iCAAiC,EAAE,gBAAgB,iBAAiB,CAAC;IAEtF,EAAE,OAAO,OAAY;QACjB,IAAI,KAAK,GAAG,MAAM,OAAO;QACzB,QAAQ,KAAK,CAAC,gCAAgC;IAClD;IAEA,OAAO;AACX;AAKO,eAAe,kBAClB,WAAyB,EACzB,OAAyB;IAEzB,QAAQ,GAAG,CAAC,CAAC,oBAAoB,EAAE,YAAY,MAAM,CAAC,YAAY,CAAC;IAEnE,MAAM,OAAwB,EAAE;IAEhC,KAAK,MAAM,cAAc,YAAa;QAClC,IAAI,WAAW,OAAO,EAAE;YACpB,MAAM,MAAM,MAAM,cAAc,YAAY;YAC5C,KAAK,IAAI,CAAC;QACd;IACJ;IAEA,QAAQ,GAAG,CAAC,CAAC,oCAAoC,CAAC;IAClD,OAAO;AACX;AAEA;;CAEC,GACD,SAAS,kBAAkB,UAAsB,EAAE,OAAyB;IACxE,MAAM,EAAE,OAAO,EAAE,GAAG;IAEpB,OAAQ,QAAQ,IAAI;QAChB,KAAK;QACL,KAAK;YACD,mDAAmD;YACnD,OAAO,QAAQ,OAAO,IAAI,EAAE;QAEhC,KAAK;YACD,8BAA8B;YAC9B,OAAQ,QAAQ,MAAM;gBAClB,KAAK;oBACD,OAAO,QAAQ,OAAO,IAAI,EAAE;gBAChC,KAAK;oBACD,OAAO,QAAQ,KAAK,IAAI,EAAE;gBAC9B,KAAK;oBACD,OAAO,QAAQ,YAAY,IAAI,EAAE;gBACrC;oBACI,OAAO,EAAE;YACjB;QAEJ;YACI,OAAO,EAAE;IACjB;AACJ;AAKO,SAAS,oBAAoB,UAAsB;IACtD,MAAM,EAAE,OAAO,EAAE,GAAG;IAEpB,6CAA6C;IAC7C,4CAA4C;IAC5C,IAAI,QAAQ,IAAI,KAAK,QAAQ;QACzB,OAAO;IACX;IAEA,8CAA8C;IAC9C,OAAO;AACX"}},
    {"offset": {"line": 4479, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/automations/predefined-rules.ts"],"sourcesContent":["import { Automation } from './types';\r\n\r\n/**\r\n * Pre-defined automation rules ready to use\r\n */\r\n\r\nexport const PREDEFINED_AUTOMATIONS: Omit<Automation, 'id' | 'createdAt' | 'updatedAt' | 'lastRun' | 'runCount'>[] = [\r\n    // 1. Follow-up Cliente Inativo\r\n    {\r\n        name: 'Follow-up Cliente Inativo',\r\n        description: 'Cria uma task de follow-up para clientes sem contato h√° 7+ dias',\r\n        enabled: false,\r\n        category: 'client',\r\n        trigger: {\r\n            type: 'time',\r\n            interval: 'daily'\r\n        },\r\n        conditions: [\r\n            {\r\n                field: 'lastContact',\r\n                operator: 'olderThan',\r\n                value: 7,\r\n                unit: 'days'\r\n            }\r\n        ],\r\n        actions: [\r\n            {\r\n                type: 'createTask',\r\n                data: {\r\n                    title: 'Follow-up: {name}',\r\n                    description: 'Cliente sem contato h√° mais de 7 dias. Agendar reuni√£o ou enviar mensagem.',\r\n                    priority: 'high'\r\n                }\r\n            },\r\n            {\r\n                type: 'notify',\r\n                title: 'Cliente Inativo',\r\n                message: 'Cliente {name} est√° sem contato h√° 7 dias'\r\n            }\r\n        ]\r\n    },\r\n\r\n    // 2. Alerta Task Atrasada\r\n    {\r\n        name: 'Alerta Task Atrasada',\r\n        description: 'Notifica quando uma task est√° atrasada',\r\n        enabled: false,\r\n        category: 'task',\r\n        trigger: {\r\n            type: 'time',\r\n            interval: 'daily'\r\n        },\r\n        conditions: [\r\n            {\r\n                field: 'deadline',\r\n                operator: 'olderThan',\r\n                value: 0,\r\n                unit: 'days'\r\n            },\r\n            {\r\n                field: 'status',\r\n                operator: 'notEquals',\r\n                value: 'concluida'\r\n            }\r\n        ],\r\n        actions: [\r\n            {\r\n                type: 'notify',\r\n                title: '‚ö†Ô∏è Task Atrasada',\r\n                message: 'A task \"{title}\" est√° atrasada!'\r\n            }\r\n        ]\r\n    },\r\n\r\n    // 3. Pipeline Parado\r\n    {\r\n        name: 'Pipeline Parado',\r\n        description: 'Alerta quando um cliente fica muito tempo em negocia√ß√£o',\r\n        enabled: false,\r\n        category: 'client',\r\n        trigger: {\r\n            type: 'time',\r\n            interval: 'daily'\r\n        },\r\n        conditions: [\r\n            {\r\n                field: 'stage',\r\n                operator: 'equals',\r\n                value: 'negociacao'\r\n            },\r\n            {\r\n                field: 'stageUpdatedAt',\r\n                operator: 'olderThan',\r\n                value: 3,\r\n                unit: 'days'\r\n            }\r\n        ],\r\n        actions: [\r\n            {\r\n                type: 'notify',\r\n                title: 'üîî Pipeline Parado',\r\n                message: 'Cliente {name} est√° em negocia√ß√£o h√° 3+ dias'\r\n            },\r\n            {\r\n                type: 'aiSuggest',\r\n                context: 'pipeline_stuck'\r\n            }\r\n        ]\r\n    },\r\n\r\n    // 4. Cliente Novo\r\n    {\r\n        name: 'Onboarding Cliente Novo',\r\n        description: 'Cria checklist de onboarding para clientes novos',\r\n        enabled: false,\r\n        category: 'client',\r\n        trigger: {\r\n            type: 'event',\r\n            entity: 'client',\r\n            event: 'create'\r\n        },\r\n        actions: [\r\n            {\r\n                type: 'createTask',\r\n                data: {\r\n                    title: 'Onboarding: {name}',\r\n                    description: 'Checklist:\\n- Reuni√£o inicial\\n- Briefing completo\\n- Definir objetivos\\n- Assinar contrato',\r\n                    priority: 'high'\r\n                }\r\n            },\r\n            {\r\n                type: 'notify',\r\n                title: 'üéâ Novo Cliente',\r\n                message: 'Cliente {name} cadastrado! Iniciar onboarding.'\r\n            }\r\n        ]\r\n    },\r\n\r\n    // 5. Pagamento Recebido\r\n    {\r\n        name: 'Atualizar Status P√≥s-Pagamento',\r\n        description: 'Atualiza status do cliente ap√≥s receber pagamento',\r\n        enabled: false,\r\n        category: 'financial',\r\n        trigger: {\r\n            type: 'event',\r\n            entity: 'transaction',\r\n            event: 'create'\r\n        },\r\n        conditions: [\r\n            {\r\n                field: 'type',\r\n                operator: 'equals',\r\n                value: 'entrada'\r\n            }\r\n        ],\r\n        actions: [\r\n            {\r\n                type: 'updateField',\r\n                entity: 'client',\r\n                field: 'status',\r\n                value: 'ativo'\r\n            },\r\n            {\r\n                type: 'notify',\r\n                title: 'üí∞ Pagamento Recebido',\r\n                message: 'Transa√ß√£o de {amount} recebida'\r\n            }\r\n        ]\r\n    },\r\n\r\n    // 6. Deadline Pr√≥ximo\r\n    {\r\n        name: 'Lembrete de Deadline',\r\n        description: 'Notifica 1 dia antes do deadline da task',\r\n        enabled: false,\r\n        category: 'task',\r\n        trigger: {\r\n            type: 'time',\r\n            interval: 'daily'\r\n        },\r\n        conditions: [\r\n            {\r\n                field: 'deadline',\r\n                operator: 'equals',\r\n                value: 1 // tomorrow\r\n            },\r\n            {\r\n                field: 'status',\r\n                operator: 'notEquals',\r\n                value: 'concluida'\r\n            }\r\n        ],\r\n        actions: [\r\n            {\r\n                type: 'notify',\r\n                title: '‚è∞ Deadline Amanh√£',\r\n                message: 'Task \"{title}\" vence amanh√£!'\r\n            }\r\n        ]\r\n    }\r\n];\r\n\r\n/**\r\n * Get automation by category\r\n */\r\nexport function getAutomationsByCategory(category: Automation['category']) {\r\n    return PREDEFINED_AUTOMATIONS.filter(auto => auto.category === category);\r\n}\r\n\r\n/**\r\n * Create automation from predefined template\r\n */\r\nexport function createFromTemplate(templateName: string): Automation {\r\n    const template = PREDEFINED_AUTOMATIONS.find(t => t.name === templateName);\r\n\r\n    if (!template) {\r\n        throw new Error(`Template \"${templateName}\" not found`);\r\n    }\r\n\r\n    return {\r\n        ...template,\r\n        id: Date.now().toString(),\r\n        createdAt: new Date(),\r\n        runCount: 0\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAMO,MAAM,yBAAwG;IACjH,+BAA+B;IAC/B;QACI,MAAM;QACN,aAAa;QACb,SAAS;QACT,UAAU;QACV,SAAS;YACL,MAAM;YACN,UAAU;QACd;QACA,YAAY;YACR;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO;gBACP,MAAM;YACV;SACH;QACD,SAAS;YACL;gBACI,MAAM;gBACN,MAAM;oBACF,OAAO;oBACP,aAAa;oBACb,UAAU;gBACd;YACJ;YACA;gBACI,MAAM;gBACN,OAAO;gBACP,SAAS;YACb;SACH;IACL;IAEA,0BAA0B;IAC1B;QACI,MAAM;QACN,aAAa;QACb,SAAS;QACT,UAAU;QACV,SAAS;YACL,MAAM;YACN,UAAU;QACd;QACA,YAAY;YACR;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO;gBACP,MAAM;YACV;YACA;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO;YACX;SACH;QACD,SAAS;YACL;gBACI,MAAM;gBACN,OAAO;gBACP,SAAS;YACb;SACH;IACL;IAEA,qBAAqB;IACrB;QACI,MAAM;QACN,aAAa;QACb,SAAS;QACT,UAAU;QACV,SAAS;YACL,MAAM;YACN,UAAU;QACd;QACA,YAAY;YACR;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO;YACX;YACA;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO;gBACP,MAAM;YACV;SACH;QACD,SAAS;YACL;gBACI,MAAM;gBACN,OAAO;gBACP,SAAS;YACb;YACA;gBACI,MAAM;gBACN,SAAS;YACb;SACH;IACL;IAEA,kBAAkB;IAClB;QACI,MAAM;QACN,aAAa;QACb,SAAS;QACT,UAAU;QACV,SAAS;YACL,MAAM;YACN,QAAQ;YACR,OAAO;QACX;QACA,SAAS;YACL;gBACI,MAAM;gBACN,MAAM;oBACF,OAAO;oBACP,aAAa;oBACb,UAAU;gBACd;YACJ;YACA;gBACI,MAAM;gBACN,OAAO;gBACP,SAAS;YACb;SACH;IACL;IAEA,wBAAwB;IACxB;QACI,MAAM;QACN,aAAa;QACb,SAAS;QACT,UAAU;QACV,SAAS;YACL,MAAM;YACN,QAAQ;YACR,OAAO;QACX;QACA,YAAY;YACR;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO;YACX;SACH;QACD,SAAS;YACL;gBACI,MAAM;gBACN,QAAQ;gBACR,OAAO;gBACP,OAAO;YACX;YACA;gBACI,MAAM;gBACN,OAAO;gBACP,SAAS;YACb;SACH;IACL;IAEA,sBAAsB;IACtB;QACI,MAAM;QACN,aAAa;QACb,SAAS;QACT,UAAU;QACV,SAAS;YACL,MAAM;YACN,UAAU;QACd;QACA,YAAY;YACR;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO,EAAE,WAAW;YACxB;YACA;gBACI,OAAO;gBACP,UAAU;gBACV,OAAO;YACX;SACH;QACD,SAAS;YACL;gBACI,MAAM;gBACN,OAAO;gBACP,SAAS;YACb;SACH;IACL;CACH;AAKM,SAAS,yBAAyB,QAAgC;IACrE,OAAO,uBAAuB,MAAM,CAAC,CAAA,OAAQ,KAAK,QAAQ,KAAK;AACnE;AAKO,SAAS,mBAAmB,YAAoB;IACnD,MAAM,WAAW,uBAAuB,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;IAE7D,IAAI,CAAC,UAAU;QACX,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,aAAa,WAAW,CAAC;IAC1D;IAEA,OAAO;QACH,GAAG,QAAQ;QACX,IAAI,KAAK,GAAG,GAAG,QAAQ;QACvB,WAAW,IAAI;QACf,UAAU;IACd;AACJ"}},
    {"offset": {"line": 4700, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/lib/useAutomations.ts"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { Automation, ExecutionContext, AutomationLog } from './automations/types';\r\nimport { runAutomation, runAllAutomations } from './automations/engine';\r\nimport { PREDEFINED_AUTOMATIONS, createFromTemplate } from './automations/predefined-rules';\r\n\r\nconst STORAGE_KEY = 'ops_automations';\r\nconst LOGS_KEY = 'ops_automation_logs';\r\n\r\nexport function useAutomations() {\r\n    const [automations, setAutomations] = useState<Automation[]>([]);\r\n    const [logs, setLogs] = useState<AutomationLog[]>([]);\r\n    const [isRunning, setIsRunning] = useState(false);\r\n\r\n    // Load automations from localStorage\r\n    useEffect(() => {\r\n        if (typeof window === 'undefined') return; // Browser only\r\n\r\n        const stored = localStorage.getItem(STORAGE_KEY);\r\n        if (stored) {\r\n            try {\r\n                const parsed = JSON.parse(stored);\r\n                setAutomations(parsed.map((a: any) => ({\r\n                    ...a,\r\n                    createdAt: new Date(a.createdAt),\r\n                    updatedAt: a.updatedAt ? new Date(a.updatedAt) : undefined,\r\n                    lastRun: a.lastRun ? new Date(a.lastRun) : undefined\r\n                })));\r\n            } catch (error) {\r\n                console.error('Error loading automations:', error);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // Save automations to localStorage\r\n    const saveAutomations = useCallback((newAutomations: Automation[]) => {\r\n        if (typeof window !== 'undefined') {\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(newAutomations));\r\n        }\r\n        setAutomations(newAutomations);\r\n    }, []);\r\n\r\n    // Create automation\r\n    const createAutomation = useCallback((automation: Omit<Automation, 'id' | 'createdAt' | 'runCount'>) => {\r\n        const newAutomation: Automation = {\r\n            ...automation,\r\n            id: Date.now().toString(),\r\n            createdAt: new Date(),\r\n            runCount: 0\r\n        };\r\n\r\n        saveAutomations([...automations, newAutomation]);\r\n        return newAutomation;\r\n    }, [automations, saveAutomations]);\r\n\r\n    // Update automation\r\n    const updateAutomation = useCallback((id: string, updates: Partial<Automation>) => {\r\n        const updated = automations.map(a =>\r\n            a.id === id ? { ...a, ...updates, updatedAt: new Date() } : a\r\n        );\r\n        saveAutomations(updated);\r\n    }, [automations, saveAutomations]);\r\n\r\n    // Delete automation\r\n    const deleteAutomation = useCallback((id: string) => {\r\n        saveAutomations(automations.filter(a => a.id !== id));\r\n    }, [automations, saveAutomations]);\r\n\r\n    // Toggle automation\r\n    const toggleAutomation = useCallback((id: string) => {\r\n        updateAutomation(id, {\r\n            enabled: !automations.find(a => a.id === id)?.enabled\r\n        });\r\n    }, [automations, updateAutomation]);\r\n\r\n    // Activate predefined rule\r\n    const activatePredefined = useCallback((templateName: string) => {\r\n        const automation = createFromTemplate(templateName);\r\n        automation.enabled = true;\r\n        saveAutomations([...automations, automation]);\r\n        return automation;\r\n    }, [automations, saveAutomations]);\r\n\r\n    // Run automations\r\n    const runAutomationsNow = useCallback(async (context: ExecutionContext) => {\r\n        setIsRunning(true);\r\n\r\n        try {\r\n            const newLogs = await runAllAutomations(automations, context);\r\n\r\n            // Update lastRun and runCount\r\n            const updated = automations.map(a => {\r\n                const log = newLogs.find(l => l.automationId === a.id);\r\n                if (log) {\r\n                    return {\r\n                        ...a,\r\n                        lastRun: log.executedAt,\r\n                        runCount: a.runCount + 1\r\n                    };\r\n                }\r\n                return a;\r\n            });\r\n\r\n            saveAutomations(updated);\r\n            setLogs([...newLogs, ...logs].slice(0, 100)); // Keep last 100 logs\r\n\r\n            return newLogs;\r\n        } finally {\r\n            setIsRunning(false);\r\n        }\r\n    }, [automations, logs, saveAutomations]);\r\n\r\n    // Get predefined templates\r\n    const getPredefinedRules = useCallback(() => {\r\n        return PREDEFINED_AUTOMATIONS;\r\n    }, []);\r\n\r\n    // Get active automations\r\n    const getActiveAutomations = useCallback(() => {\r\n        return automations.filter(a => a.enabled);\r\n    }, [automations]);\r\n\r\n    return {\r\n        automations,\r\n        logs,\r\n        isRunning,\r\n        createAutomation,\r\n        updateAutomation,\r\n        deleteAutomation,\r\n        toggleAutomation,\r\n        activatePredefined,\r\n        runAutomationsNow,\r\n        getPredefinedRules,\r\n        getActiveAutomations\r\n    };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4901, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/AutomationScheduler.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect } from 'react';\r\nimport { useAutomations } from '@/lib/useAutomations';\r\nimport { useAppStore } from '@/lib/store';\r\n\r\n/**\r\n * Automation Scheduler Component\r\n * Runs automations periodically in the background\r\n */\r\nexport function AutomationScheduler() {\r\n    const { getActiveAutomations, runAutomationsNow } = useAutomations();\r\n    const { clients, tasks, transactions } = useAppStore();\r\n\r\n    useEffect(() => {\r\n        console.log('ü§ñ [Scheduler] Starting automation scheduler...');\r\n\r\n        // Run automations every 5 minutes\r\n        const interval = setInterval(async () => {\r\n            const activeAutomations = getActiveAutomations();\r\n\r\n            if (activeAutomations.length > 0) {\r\n                console.log(`üîÑ [Scheduler] Running ${activeAutomations.length} automations...`);\r\n\r\n                try {\r\n                    await runAutomationsNow({\r\n                        clients,\r\n                        tasks,\r\n                        transactions,\r\n                        user: {}\r\n                    });\r\n\r\n                    console.log('‚úÖ [Scheduler] Automations completed');\r\n                } catch (error) {\r\n                    console.error('‚ùå [Scheduler] Error running automations:', error);\r\n                }\r\n            }\r\n        }, 5 * 60 * 1000); // 5 minutes\r\n\r\n        // Cleanup\r\n        return () => {\r\n            console.log('üõë [Scheduler] Stopping automation scheduler');\r\n            clearInterval(interval);\r\n        };\r\n    }, [clients, tasks, transactions, getActiveAutomations, runAutomationsNow]);\r\n\r\n    return null; // This component doesn't render anything\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;AAHA;;;;AASO,SAAS;;IACZ,MAAM,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,GAAG,IAAA,0IAAc;IAClE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,IAAA,+HAAW;IAEpD,IAAA,0KAAS;yCAAC;YACN,QAAQ,GAAG,CAAC;YAEZ,kCAAkC;YAClC,MAAM,WAAW;0DAAY;oBACzB,MAAM,oBAAoB;oBAE1B,IAAI,kBAAkB,MAAM,GAAG,GAAG;wBAC9B,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,kBAAkB,MAAM,CAAC,eAAe,CAAC;wBAE/E,IAAI;4BACA,MAAM,kBAAkB;gCACpB;gCACA;gCACA;gCACA,MAAM,CAAC;4BACX;4BAEA,QAAQ,GAAG,CAAC;wBAChB,EAAE,OAAO,OAAO;4BACZ,QAAQ,KAAK,CAAC,4CAA4C;wBAC9D;oBACJ;gBACJ;yDAAG,IAAI,KAAK,OAAO,YAAY;YAE/B,UAAU;YACV;iDAAO;oBACH,QAAQ,GAAG,CAAC;oBACZ,cAAc;gBAClB;;QACJ;wCAAG;QAAC;QAAS;QAAO;QAAc;QAAsB;KAAkB;IAE1E,OAAO,MAAM,yCAAyC;AAC1D;GArCgB;;QACwC,0IAAc;QACzB,+HAAW;;;KAFxC"}},
    {"offset": {"line": 4973, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/components/LoginPage.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from 'react';\r\nimport { useAuth, COLLABORATORS } from '@/lib/auth';\r\n\r\nexport default function LoginPage() {\r\n    const [selectedEmail, setSelectedEmail] = useState('');\r\n    const [localLoading, setLocalLoading] = useState(false);\r\n    const { login } = useAuth();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!selectedEmail) {\r\n            alert('Selecione um usu√°rio');\r\n            return;\r\n        }\r\n        setLocalLoading(true);\r\n        try {\r\n            await login(selectedEmail);\r\n        } finally {\r\n            setLocalLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleQuickLogin = async (email: string) => {\r\n        setLocalLoading(true);\r\n        try {\r\n            await login(email);\r\n        } finally {\r\n            setLocalLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-950 flex items-center justify-center p-4\">\r\n            <div className=\"w-full max-w-md\">\r\n                {/* Header with LARGE Logo */}\r\n                <div className=\"text-center mb-8\">\r\n                    <img\r\n                        src=\"/logo-full.png\"\r\n                        alt=\"OPS Operation\"\r\n                        className=\"h-24 w-auto mx-auto mb-8\"\r\n                    />\r\n                    <p className=\"text-slate-500 text-sm\">Selecione seu usu√°rio</p>\r\n                </div>\r\n\r\n                {/* Quick Login Buttons */}\r\n                <div className=\"space-y-3\">\r\n                    {COLLABORATORS.map((collab) => (\r\n                        <button\r\n                            key={collab.email}\r\n                            type=\"button\"\r\n                            onClick={() => handleQuickLogin(collab.email)}\r\n                            disabled={localLoading}\r\n                            className=\"w-full bg-slate-900 hover:bg-slate-800 border border-slate-800 hover:border-violet-600/50 rounded-xl px-6 py-4 text-left transition-all group disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        >\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-12 h-12 bg-violet-600/10 rounded-full flex items-center justify-center group-hover:bg-violet-600/20 transition-colors\">\r\n                                    <span className=\"text-xl font-bold text-violet-400\">\r\n                                        {collab.username.charAt(0)}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <p className=\"font-semibold text-white group-hover:text-violet-300 transition-colors\">\r\n                                        {collab.username}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-slate-500\">{collab.email}</p>\r\n                                </div>\r\n                                <div className=\"opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    <div className=\"w-2 h-2 bg-violet-400 rounded-full\"></div>\r\n                                </div>\r\n                            </div>\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <p className=\"text-center text-xs text-slate-600 mt-8\">\r\n                    Ops Operation v2.0 - Powered by Supabase\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAIe,SAAS;;IACpB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,0HAAO;IAEzB,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,eAAe;YAChB,MAAM;YACN;QACJ;QACA,gBAAgB;QAChB,IAAI;YACA,MAAM,MAAM;QAChB,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,MAAM,mBAAmB,OAAO;QAC5B,gBAAgB;QAChB,IAAI;YACA,MAAM,MAAM;QAChB,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BACG,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;sCAEd,6LAAC;4BAAE,WAAU;sCAAyB;;;;;;;;;;;;8BAI1C,6LAAC;oBAAI,WAAU;8BACV,gIAAa,CAAC,GAAG,CAAC,CAAC,uBAChB,6LAAC;4BAEG,MAAK;4BACL,SAAS,IAAM,iBAAiB,OAAO,KAAK;4BAC5C,UAAU;4BACV,WAAU;sCAEV,cAAA,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAK,WAAU;sDACX,OAAO,QAAQ,CAAC,MAAM,CAAC;;;;;;;;;;;kDAGhC,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAE,WAAU;0DACR,OAAO,QAAQ;;;;;;0DAEpB,6LAAC;gDAAE,WAAU;0DAA0B,OAAO,KAAK;;;;;;;;;;;;kDAEvD,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAI,WAAU;;;;;;;;;;;;;;;;;2BAnBlB,OAAO,KAAK;;;;;;;;;;8BA2B7B,6LAAC;oBAAE,WAAU;8BAA0C;;;;;;;;;;;;;;;;;AAMvE;GA9EwB;;QAGF,0HAAO;;;KAHL"}},
    {"offset": {"line": 5157, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nipobsw/Desktop/Ops%20Operation/app/layout.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { Inter } from 'next/font/google';\r\nimport './globals.css';\r\nimport Sidebar from '@/components/Sidebar';\r\nimport { AppProvider } from '@/lib/store';\r\nimport { AuthProvider, useAuth } from '@/lib/auth';\r\nimport { NotificationProvider } from '@/lib/NotificationContext';\r\nimport { AIAssistant } from '@/components/AIAssistant';\r\nimport { GlobalSearch } from '@/components/GlobalSearch';\r\nimport { IOSInstallPrompt } from '@/components/IOSInstallPrompt';\r\nimport { PushNotificationPrompt } from '@/components/PushNotificationPrompt';\r\nimport { AutomationScheduler } from '@/components/AutomationScheduler';\r\nimport { Menu } from 'lucide-react';\r\nimport LoginPage from '@/components/LoginPage';\r\n\r\nconst inter = Inter({ subsets: ['latin'] });\r\n\r\nexport default function RootLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    return (\r\n        <html lang=\"en\" className=\"dark\">\r\n            <head>\r\n                <meta name=\"theme-color\" content=\"#8b5cf6\" />\r\n                <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\r\n                <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\" />\r\n                <meta name=\"apple-mobile-web-app-title\" content=\"OPS Operation\" />\r\n                <link rel=\"manifest\" href=\"/manifest.json\" />\r\n                <link rel=\"icon\" href=\"/icons/icon-192.png\" />\r\n                <link rel=\"apple-touch-icon\" href=\"/icons/icon-180.png\" />\r\n            </head>\r\n            <body className={inter.className}>\r\n                <AuthProvider>\r\n                    <AppProvider>\r\n                        <NotificationProvider>\r\n                            <LayoutContent>{children}</LayoutContent>\r\n                        </NotificationProvider>\r\n                    </AppProvider>\r\n                </AuthProvider>\r\n            </body>\r\n        </html>\r\n    );\r\n}\r\n\r\nfunction LayoutContent({ children }: { children: React.ReactNode }) {\r\n    const [isMobileSidebarOpen, setIsMobileSidebarOpen] = useState(false);\r\n    const { isAuthenticated } = useAuth();\r\n\r\n    // Register Service Worker for PWA\r\n    useEffect(() => {\r\n        if ('serviceWorker' in navigator) {\r\n            navigator.serviceWorker\r\n                .register('/sw.js')\r\n                .then((registration) => {\r\n                    console.log('‚úÖ Service Worker registered:', registration.scope);\r\n                })\r\n                .catch((error) => {\r\n                    console.log('‚ùå Service Worker registration failed:', error);\r\n                });\r\n        }\r\n    }, []);\r\n\r\n    if (!isAuthenticated) {\r\n        return <LoginPage />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-slate-950 text-slate-50\">\r\n            <Sidebar isMobileOpen={isMobileSidebarOpen} onClose={() => setIsMobileSidebarOpen(false)} />\r\n\r\n            {/* Mobile Header with Hamburger */}\r\n            <div className=\"fixed top-0 left-0 right-0 h-14 md:h-16 bg-slate-950/90 backdrop-blur-md border-b border-slate-900 z-30 flex items-center px-4 md:hidden\">\r\n                <button\r\n                    onClick={() => setIsMobileSidebarOpen(true)}\r\n                    className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-900 rounded-lg transition-colors\"\r\n                >\r\n                    <Menu size={24} />\r\n                </button>\r\n                <div className=\"flex items-center gap-2 ml-3\">\r\n                    <img\r\n                        src=\"/logo-icon.png\"\r\n                        alt=\"OPS Operation\"\r\n                        className=\"w-7 h-7 rounded-lg\"\r\n                    />\r\n                    <h1 className=\"text-white font-bold text-sm\">OPS Operation</h1>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 md:ml-64 pt-14 md:pt-0 p-4 md:p-8 w-full min-h-screen overflow-x-hidden\">\r\n                {children}\r\n            </main>\r\n\r\n            <AIAssistant />\r\n            <GlobalSearch />\r\n            <IOSInstallPrompt />\r\n            <PushNotificationPrompt />\r\n            <AutomationScheduler />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAdA;;;;;;;;;;;;;;;AAkBe,SAAS,WAAW,EAC/B,QAAQ,EAGX;IACG,qBACI,6LAAC;QAAK,MAAK;QAAK,WAAU;;0BACtB,6LAAC;;kCACG,6LAAC;wBAAK,MAAK;wBAAc,SAAQ;;;;;;kCACjC,6LAAC;wBAAK,MAAK;wBAA+B,SAAQ;;;;;;kCAClD,6LAAC;wBAAK,MAAK;wBAAwC,SAAQ;;;;;;kCAC3D,6LAAC;wBAAK,MAAK;wBAA6B,SAAQ;;;;;;kCAChD,6LAAC;wBAAK,KAAI;wBAAW,MAAK;;;;;;kCAC1B,6LAAC;wBAAK,KAAI;wBAAO,MAAK;;;;;;kCACtB,6LAAC;wBAAK,KAAI;wBAAmB,MAAK;;;;;;;;;;;;0BAEtC,6LAAC;gBAAK,WAAW,uJAAK,CAAC,SAAS;0BAC5B,cAAA,6LAAC,+HAAY;8BACT,cAAA,6LAAC,+HAAW;kCACR,cAAA,6LAAC,sJAAoB;sCACjB,cAAA,6LAAC;0CAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5C;KA3BwB;AA6BxB,SAAS,cAAc,EAAE,QAAQ,EAAiC;;IAC9D,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,0HAAO;IAEnC,kCAAkC;IAClC,IAAA,0KAAS;mCAAC;YACN,IAAI,mBAAmB,WAAW;gBAC9B,UAAU,aAAa,CAClB,QAAQ,CAAC,UACT,IAAI;+CAAC,CAAC;wBACH,QAAQ,GAAG,CAAC,gCAAgC,aAAa,KAAK;oBAClE;8CACC,KAAK;+CAAC,CAAC;wBACJ,QAAQ,GAAG,CAAC,yCAAyC;oBACzD;;YACR;QACJ;kCAAG,EAAE;IAEL,IAAI,CAAC,iBAAiB;QAClB,qBAAO,6LAAC,sIAAS;;;;;IACrB;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,oIAAO;gBAAC,cAAc;gBAAqB,SAAS,IAAM,uBAAuB;;;;;;0BAGlF,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,SAAS,IAAM,uBAAuB;wBACtC,WAAU;kCAEV,cAAA,6LAAC,6MAAI;4BAAC,MAAM;;;;;;;;;;;kCAEhB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCACG,KAAI;gCACJ,KAAI;gCACJ,WAAU;;;;;;0CAEd,6LAAC;gCAAG,WAAU;0CAA+B;;;;;;;;;;;;;;;;;;0BAKrD,6LAAC;gBAAK,WAAU;0BACX;;;;;;0BAGL,6LAAC,4IAAW;;;;;0BACZ,6LAAC,8IAAY;;;;;0BACb,6LAAC,sJAAgB;;;;;0BACjB,6LAAC,kKAAsB;;;;;0BACvB,6LAAC,4JAAmB;;;;;;;;;;;AAGhC;GAxDS;;QAEuB,0HAAO;;;MAF9B"}}]
}