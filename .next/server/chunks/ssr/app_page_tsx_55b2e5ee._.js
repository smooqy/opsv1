module.exports=[60350,a=>{"use strict";var b=a.i(87924),c=a.i(43672);function d(a,b){return 0===b?100*(a>0):(a-b)/b*100}var e=a.i(98621),f=a.i(38246);function g({insight:a}){return(0,b.jsx)("div",{className:(0,e.clsx)("p-4 rounded-xl border-l-4 bg-slate-900/50",{critical:"border-red-500 bg-red-500/10",warning:"border-orange-500 bg-orange-500/10",success:"border-green-500 bg-green-500/10",info:"border-blue-500 bg-blue-500/10"}[a.severity]),children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"text-2xl shrink-0",children:a.icon}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,b.jsx)("h4",{className:"font-semibold text-white",children:a.title}),void 0!==a.metric&&(0,b.jsx)("span",{className:"text-sm font-bold text-white shrink-0",children:a.metric})]}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:a.description}),void 0!==a.change&&(0,b.jsxs)("span",{className:(0,e.clsx)("text-xs font-medium",a.change>0?"text-green-400":"text-red-400"),children:[a.change>0?"â†‘":"â†“"," ",Math.abs(a.change).toFixed(1),"%"]}),a.action&&(0,b.jsxs)(f.default,{href:a.action.url,className:"inline-block mt-2 text-sm text-violet-400 hover:text-violet-300 transition-colors",children:[a.action.label," â†’"]})]})]})})}function h({title:a,value:c,change:d,icon:f,color:g="violet"}){let h=void 0!==d&&!isNaN(d),i=h&&d>0,j=h&&d<0;return(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6 hover:border-slate-700 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("span",{className:"text-2xl",children:f}),h&&(0,b.jsxs)("span",{className:(0,e.clsx)("text-sm font-medium px-2 py-1 rounded-lg",i&&"text-green-400 bg-green-500/10",j&&"text-red-400 bg-red-500/10",!i&&!j&&"text-slate-500 bg-slate-800"),children:[i&&"â†‘",j&&"â†“"," ",Math.abs(d).toFixed(1),"%"]})]}),(0,b.jsx)("h3",{className:"text-sm text-slate-500 mb-1",children:a}),(0,b.jsx)("p",{className:"text-3xl font-bold text-white",children:c}),h&&(0,b.jsx)("p",{className:"text-xs text-slate-600 mt-2",children:"vs mÃªs anterior"})]})}var i=a.i(72131);function j(){let{clients:a,tasks:e,transactions:f}=(0,c.useAppStore)(),j=(0,i.useMemo)(()=>(function(a){let b=[];try{let c=a.clients.filter(a=>(a&&a.status,!1));c.length>0&&b.push({id:"inactive-clients",type:"alert",severity:c.length>=5?"critical":"warning",icon:"ðŸ“ž",title:`${c.length} cliente${c.length>1?"s":""} precisam aten\xe7\xe3o`,description:"Clientes sem contato recente",metric:c.length,action:{label:"Contactar",url:"/clients"}});let e=new Date().getMonth(),f=new Date().getFullYear(),g=0===e?11:e-1,h=0===e?f-1:f,i=a.transactions.filter(a=>{let b=new Date(a.date);return"receita"===a.type&&b.getMonth()===e&&b.getFullYear()===f}).reduce((a,b)=>a+(b.amount||0),0),j=a.transactions.filter(a=>{let b=new Date(a.date);return"receita"===a.type&&b.getMonth()===g&&b.getFullYear()===h}).reduce((a,b)=>a+(b.amount||0),0),k=d(i,j);k>10?b.push({id:"revenue-growth",type:"trend",severity:"success",icon:"ðŸ“ˆ",title:"Receita em alta!",description:`Crescimento de ${k.toFixed(0)}% vs m\xeas anterior`,change:k}):k<-10&&b.push({id:"revenue-decline",type:"alert",severity:"critical",icon:"ðŸ“‰",title:"Receita em queda",description:`Redu\xe7\xe3o de ${Math.abs(k).toFixed(0)}% vs m\xeas anterior`,change:k,action:{label:"Analisar",url:"/financial"}});let l=a.transactions.filter(a=>{let b=new Date(a.date);return"despesa"===a.type&&b.getMonth()===e&&b.getFullYear()===f}).reduce((a,b)=>a+(b.amount||0),0);l>i&&i>0&&b.push({id:"expenses-high",type:"alert",severity:"warning",icon:"ðŸ’¸",title:"Despesas maiores que receita",description:`Despesas: R$ ${l.toFixed(0)} | Receita: R$ ${i.toFixed(0)}`,action:{label:"Revisar",url:"/financial"}});let m=a.tasks.filter(a=>"done"!==a.stage).length;m>10&&b.push({id:"many-tasks",type:"suggestion",severity:"info",icon:"âœ…",title:`${m} tasks em andamento`,description:"Considere priorizar as mais urgentes",metric:m,action:{label:"Priorizar",url:"/production"}})}catch(a){console.error("Error generating insights:",a)}return b.slice(0,5)})({clients:a,tasks:e,transactions:f}),[a,e,f]),k=(0,i.useMemo)(()=>{var b;let c,g,h,i,j,k,l,m,n;return b={clients:a,tasks:e,transactions:f},c=new Date().getMonth(),g=new Date().getFullYear(),h=0===c?11:c-1,i=0===c?g-1:g,j=b.transactions.filter(a=>{let b=new Date(a.date);return"receita"===a.type&&b.getMonth()===c&&b.getFullYear()===g}).reduce((a,b)=>a+(b.amount||0),0),k=b.transactions.filter(a=>{let b=new Date(a.date);return"receita"===a.type&&b.getMonth()===h&&b.getFullYear()===i}).reduce((a,b)=>a+(b.amount||0),0),l=b.transactions.filter(a=>{let b=new Date(a.date);return"despesa"===a.type&&b.getMonth()===c&&b.getFullYear()===g}).reduce((a,b)=>a+(b.amount||0),0),m=b.transactions.filter(a=>{let b=new Date(a.date);return"despesa"===a.type&&b.getMonth()===h&&b.getFullYear()===i}).reduce((a,b)=>a+(b.amount||0),0),n=j-l,{revenue:j,expenses:l,profit:n,activeClients:b.clients.filter(a=>"ativo"===a.status).length,pendingTasks:b.tasks.filter(a=>"done"!==a.stage).length,revenueChange:d(j,k),expensesChange:d(l,m),profitChange:d(n,k-m)}},[a,e,f]);return(0,b.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"}),(0,b.jsx)("p",{className:"text-slate-500 mt-2",children:"VisÃ£o completa do financeiro da agÃªncia"})]}),j.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ’¡ Insights do Dia"}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-3",children:j.map(a=>(0,b.jsx)(g,{insight:a},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"MÃ©tricas Principais"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(h,{title:"Receita",value:`R$ ${k.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:k.revenueChange,icon:"ðŸ’°"}),(0,b.jsx)(h,{title:"Despesas",value:`R$ ${k.expenses.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:k.expensesChange,icon:"ðŸ’¸"}),(0,b.jsx)(h,{title:"Lucro",value:`R$ ${k.profit.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:k.profitChange,icon:"ðŸ“ˆ"}),(0,b.jsx)(h,{title:"Clientes Ativos",value:k.activeClients,icon:"ðŸ‘¥"})]})]}),(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:["âœ… Tasks em Andamento",(0,b.jsxs)("span",{className:"text-sm font-normal text-slate-500",children:["(",k.pendingTasks,")"]})]}),0===k.pendingTasks?(0,b.jsx)("div",{className:"text-center py-8 text-slate-500",children:(0,b.jsx)("p",{className:"text-sm",children:"Nenhuma task pendente"})}):(0,b.jsx)("div",{className:"space-y-2",children:e.filter(a=>"done"!==a.stage).slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-950 rounded-lg border border-slate-800 hover:border-slate-700 transition-colors",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-white text-sm",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.client_name||"Sem cliente"})]}),(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-violet-500/10 text-violet-400 rounded",children:a.stage})]},a.id))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total de Clientes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:a.length})]}),(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total de Tasks"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:e.length})]}),(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"TransaÃ§Ãµes este MÃªs"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:f.filter(a=>{let b=new Date(a.date),c=new Date;return b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()}).length})]})]})]})}a.s(["default",()=>j],60350)}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map