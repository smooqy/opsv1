(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),s=e.i(18589);function a(e,t){return 0===t?100*(e>0):(e-t)/t*100}var i=e.i(7670),n=e.i(22016);function l({insight:e}){return(0,t.jsx)("div",{className:(0,i.clsx)("p-4 rounded-xl border-l-4 bg-slate-900/50",{critical:"border-red-500 bg-red-500/10",warning:"border-orange-500 bg-orange-500/10",success:"border-green-500 bg-green-500/10",info:"border-blue-500 bg-blue-500/10"}[e.severity]),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-2xl shrink-0",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-white",children:e.title}),void 0!==e.metric&&(0,t.jsx)("span",{className:"text-sm font-bold text-white shrink-0",children:e.metric})]}),(0,t.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:e.description}),void 0!==e.change&&(0,t.jsxs)("span",{className:(0,i.clsx)("text-xs font-medium",e.change>0?"text-green-400":"text-red-400"),children:[e.change>0?"â†‘":"â†“"," ",Math.abs(e.change).toFixed(1),"%"]}),e.action&&(0,t.jsxs)(n.default,{href:e.action.url,className:"inline-block mt-2 text-sm text-violet-400 hover:text-violet-300 transition-colors",children:[e.action.label," â†’"]})]})]})})}function r({title:e,value:s,change:a,icon:n,color:l="violet"}){let r=void 0!==a&&!isNaN(a),c=r&&a>0,d=r&&a<0;return(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6 hover:border-slate-700 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-2xl",children:n}),r&&(0,t.jsxs)("span",{className:(0,i.clsx)("text-sm font-medium px-2 py-1 rounded-lg",c&&"text-green-400 bg-green-500/10",d&&"text-red-400 bg-red-500/10",!c&&!d&&"text-slate-500 bg-slate-800"),children:[c&&"â†‘",d&&"â†“"," ",Math.abs(a).toFixed(1),"%"]})]}),(0,t.jsx)("h3",{className:"text-sm text-slate-500 mb-1",children:e}),(0,t.jsx)("p",{className:"text-3xl font-bold text-white",children:s}),r&&(0,t.jsx)("p",{className:"text-xs text-slate-600 mt-2",children:"vs mÃªs anterior"})]})}var c=e.i(71645);function d(){let{clients:e,tasks:i,transactions:n}=(0,s.useAppStore)(),d=(0,c.useMemo)(()=>(function(e){let t=[];try{let s=e.clients.filter(e=>(e&&e.status,!1));s.length>0&&t.push({id:"inactive-clients",type:"alert",severity:s.length>=5?"critical":"warning",icon:"ðŸ“ž",title:`${s.length} cliente${s.length>1?"s":""} precisam aten\xe7\xe3o`,description:"Clientes sem contato recente",metric:s.length,action:{label:"Contactar",url:"/clients"}});let i=new Date().getMonth(),n=new Date().getFullYear(),l=0===i?11:i-1,r=0===i?n-1:n,c=e.transactions.filter(e=>{let t=new Date(e.date);return"receita"===e.type&&t.getMonth()===i&&t.getFullYear()===n}).reduce((e,t)=>e+(t.amount||0),0),d=e.transactions.filter(e=>{let t=new Date(e.date);return"receita"===e.type&&t.getMonth()===l&&t.getFullYear()===r}).reduce((e,t)=>e+(t.amount||0),0),o=a(c,d);o>10?t.push({id:"revenue-growth",type:"trend",severity:"success",icon:"ðŸ“ˆ",title:"Receita em alta!",description:`Crescimento de ${o.toFixed(0)}% vs m\xeas anterior`,change:o}):o<-10&&t.push({id:"revenue-decline",type:"alert",severity:"critical",icon:"ðŸ“‰",title:"Receita em queda",description:`Redu\xe7\xe3o de ${Math.abs(o).toFixed(0)}% vs m\xeas anterior`,change:o,action:{label:"Analisar",url:"/financial"}});let x=e.transactions.filter(e=>{let t=new Date(e.date);return"despesa"===e.type&&t.getMonth()===i&&t.getFullYear()===n}).reduce((e,t)=>e+(t.amount||0),0);x>c&&c>0&&t.push({id:"expenses-high",type:"alert",severity:"warning",icon:"ðŸ’¸",title:"Despesas maiores que receita",description:`Despesas: R$ ${x.toFixed(0)} | Receita: R$ ${c.toFixed(0)}`,action:{label:"Revisar",url:"/financial"}});let m=e.tasks.filter(e=>"done"!==e.stage).length;m>10&&t.push({id:"many-tasks",type:"suggestion",severity:"info",icon:"âœ…",title:`${m} tasks em andamento`,description:"Considere priorizar as mais urgentes",metric:m,action:{label:"Priorizar",url:"/production"}})}catch(e){console.error("Error generating insights:",e)}return t.slice(0,5)})({clients:e,tasks:i,transactions:n}),[e,i,n]),o=(0,c.useMemo)(()=>{var t;let s,l,r,c,d,o,x,m,h;return t={clients:e,tasks:i,transactions:n},s=new Date().getMonth(),l=new Date().getFullYear(),r=0===s?11:s-1,c=0===s?l-1:l,d=t.transactions.filter(e=>{let t=new Date(e.date);return"receita"===e.type&&t.getMonth()===s&&t.getFullYear()===l}).reduce((e,t)=>e+(t.amount||0),0),o=t.transactions.filter(e=>{let t=new Date(e.date);return"receita"===e.type&&t.getMonth()===r&&t.getFullYear()===c}).reduce((e,t)=>e+(t.amount||0),0),x=t.transactions.filter(e=>{let t=new Date(e.date);return"despesa"===e.type&&t.getMonth()===s&&t.getFullYear()===l}).reduce((e,t)=>e+(t.amount||0),0),m=t.transactions.filter(e=>{let t=new Date(e.date);return"despesa"===e.type&&t.getMonth()===r&&t.getFullYear()===c}).reduce((e,t)=>e+(t.amount||0),0),h=d-x,{revenue:d,expenses:x,profit:h,activeClients:t.clients.filter(e=>"ativo"===e.status).length,pendingTasks:t.tasks.filter(e=>"done"!==e.stage).length,revenueChange:a(d,o),expensesChange:a(x,m),profitChange:a(h,o-m)}},[e,i,n]);return(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-slate-500 mt-2",children:"VisÃ£o completa do financeiro da agÃªncia"})]}),d.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ’¡ Insights do Dia"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3",children:d.map(e=>(0,t.jsx)(l,{insight:e},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"MÃ©tricas Principais"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(r,{title:"Receita",value:`R$ ${o.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:o.revenueChange,icon:"ðŸ’°"}),(0,t.jsx)(r,{title:"Despesas",value:`R$ ${o.expenses.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:o.expensesChange,icon:"ðŸ’¸"}),(0,t.jsx)(r,{title:"Lucro",value:`R$ ${o.profit.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:o.profitChange,icon:"ðŸ“ˆ"}),(0,t.jsx)(r,{title:"Clientes Ativos",value:o.activeClients,icon:"ðŸ‘¥"})]})]}),(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:["âœ… Tasks em Andamento",(0,t.jsxs)("span",{className:"text-sm font-normal text-slate-500",children:["(",o.pendingTasks,")"]})]}),0===o.pendingTasks?(0,t.jsx)("div",{className:"text-center py-8 text-slate-500",children:(0,t.jsx)("p",{className:"text-sm",children:"Nenhuma task pendente"})}):(0,t.jsx)("div",{className:"space-y-2",children:i.filter(e=>"done"!==e.stage).slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-950 rounded-lg border border-slate-800 hover:border-slate-700 transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white text-sm",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.client_name||"Sem cliente"})]}),(0,t.jsx)("span",{className:"text-xs px-2 py-1 bg-violet-500/10 text-violet-400 rounded",children:e.stage})]},e.id))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total de Clientes"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:e.length})]}),(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total de Tasks"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:i.length})]}),(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"TransaÃ§Ãµes este MÃªs"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:n.filter(e=>{let t=new Date(e.date),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length})]})]})]})}e.s(["default",()=>d],31713)}]);